"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _dvaCoreTaro = require("dva-core-taro");

var _reduxLogger = require("redux-logger");

var _dvaLoading = _interopRequireDefault(require("dva-loading"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function createStore() {
  var opt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var otherOpt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
    isCreateLogger: true
  };

  if (otherOpt.isCreateLogger && process.env.NODE_ENV === 'development') {
    opt.onAction = [(0, _reduxLogger.createLogger)()];
  }

  var app = (0, _dvaCoreTaro.create)(opt);
  app.use((0, _dvaLoading.default)({}));
  opt.models && opt.models.forEach(function (model) {
    return app.model(model);
  });
  app.start();
  var store = app._store;
  store.dispatch = store.dispatch.bind(store);
  return store;
}

var _default = createStore;
exports.default = _default;