{"version":3,"file":"index.esm.js","sources":["../../nerv-utils/dist/index.js","../src/current-owner.ts","../../nerv-shared/dist/index.js","../src/vdom/ref.ts","../src/event.ts","../src/vdom/unmount.ts","../src/vdom/svg-property-config.ts","../src/vdom/patch.ts","../src/vdom/create-element.ts","../src/vdom/create-vtext.ts","../src/vdom/create-void.ts","../src/hooks.ts","../src/lifecycle.ts","../src/render-queue.ts","../src/component.ts","../src/pure-component.ts","../src/options.ts","../src/render.ts","../src/vdom/create-vnode.ts","../src/vdom/h.ts","../src/full-component.ts","../src/create-element.ts","../src/clone-element.ts","../src/children.ts","../src/hydrate.ts","../src/vdom/create-portal.ts","../src/version.ts","../src/dom.ts","../src/prop-types.ts","../src/create-ref.ts","../src/memo.ts","../src/emiter.ts","../src/create-context.ts","../src/index.ts"],"sourcesContent":["// tslint:disable-next-line\r\nvar global = (function () {\r\n    let local;\r\n    if (typeof global !== 'undefined') {\r\n        local = global;\r\n    }\r\n    else if (typeof self !== 'undefined') {\r\n        local = self;\r\n    }\r\n    else {\r\n        try {\r\n            // tslint:disable-next-line:function-constructor\r\n            local = Function('return this')();\r\n        }\r\n        catch (e) {\r\n            throw new Error('global object is unavailable in this environment');\r\n        }\r\n    }\r\n    return local;\r\n})();\r\nconst isBrowser = typeof window !== 'undefined';\r\n// tslint:disable-next-line:no-empty\r\nfunction noop() { }\r\nconst fakeDoc = {\r\n    createElement: noop,\r\n    createElementNS: noop,\r\n    createTextNode: noop\r\n};\r\nconst doc = isBrowser ? document : fakeDoc;\r\nconst isMacSafari = isBrowser && navigator.platform &&\r\n    /mac/i.test(navigator.platform) && /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\nfunction isNumber(arg) {\r\n    return typeof arg === 'number';\r\n}\r\nconst isSupportSVG = isFunction(doc.createAttributeNS);\r\nfunction isString(arg) {\r\n    return typeof arg === 'string';\r\n}\r\nfunction isFunction(arg) {\r\n    return typeof arg === 'function';\r\n}\r\nfunction isBoolean(arg) {\r\n    return arg === true || arg === false;\r\n}\r\nconst isArray = Array.isArray;\r\nfunction isObject(arg) {\r\n    return arg === Object(arg) && !isFunction(arg);\r\n}\r\nfunction isNative(Ctor) {\r\n    return isFunction(Ctor) && /native code/.test(Ctor.toString());\r\n}\r\nfunction isUndefined(o) {\r\n    return o === undefined;\r\n}\r\n// Object.is polyfill\r\n// https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is\r\nfunction objectIs(x, y) {\r\n    if (x === y) { // Steps 1-5, 7-10\r\n        // Steps 6.b-6.e: +0 != -0\r\n        return x !== 0 || 1 / x === 1 / y;\r\n    }\r\n    // eslint-disable-next-line no-self-compare\r\n    return x !== x && y !== y;\r\n}\n\nconst canUsePromise = 'Promise' in global && !isMacSafari;\r\nlet resolved;\r\nif (canUsePromise) {\r\n    resolved = Promise.resolve();\r\n}\r\nconst nextTick = (fn, ...args) => {\r\n    fn = isFunction(fn) ? fn.bind(null, ...args) : fn;\r\n    if (canUsePromise) {\r\n        return resolved.then(fn);\r\n    }\r\n    const timerFunc = 'requestAnimationFrame' in global && !isMacSafari ? requestAnimationFrame : setTimeout;\r\n    timerFunc(fn);\r\n};\n\n/* istanbul ignore next */\r\n// tslint:disable-next-line\r\nObject.is = Object.is || function (x, y) {\r\n    if (x === y) {\r\n        return x !== 0 || 1 / x === 1 / y;\r\n    }\r\n    return x !== x && y !== y;\r\n};\r\nfunction shallowEqual(obj1, obj2) {\r\n    if (obj1 === null || obj2 === null) {\r\n        return false;\r\n    }\r\n    if (Object.is(obj1, obj2)) {\r\n        return true;\r\n    }\r\n    const obj1Keys = obj1 ? Object.keys(obj1) : [];\r\n    const obj2Keys = obj2 ? Object.keys(obj2) : [];\r\n    if (obj1Keys.length !== obj2Keys.length) {\r\n        return false;\r\n    }\r\n    for (let i = 0; i < obj1Keys.length; i++) {\r\n        const obj1KeyItem = obj1Keys[i];\r\n        if (!obj2.hasOwnProperty(obj1KeyItem) || !Object.is(obj1[obj1KeyItem], obj2[obj1KeyItem])) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\n\nclass SimpleMap {\r\n    constructor() {\r\n        this.cache = [];\r\n        this.size = 0;\r\n    }\r\n    set(k, v) {\r\n        const len = this.cache.length;\r\n        if (!len) {\r\n            this.cache.push({ k, v });\r\n            this.size += 1;\r\n            return;\r\n        }\r\n        for (let i = 0; i < len; i++) {\r\n            const item = this.cache[i];\r\n            if (item.k === k) {\r\n                item.v = v;\r\n                return;\r\n            }\r\n        }\r\n        this.cache.push({ k, v });\r\n        this.size += 1;\r\n    }\r\n    get(k) {\r\n        const len = this.cache.length;\r\n        if (!len) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < len; i++) {\r\n            const item = this.cache[i];\r\n            if (item.k === k) {\r\n                return item.v;\r\n            }\r\n        }\r\n    }\r\n    has(k) {\r\n        const len = this.cache.length;\r\n        if (!len) {\r\n            return false;\r\n        }\r\n        for (let i = 0; i < len; i++) {\r\n            const item = this.cache[i];\r\n            if (item.k === k) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    delete(k) {\r\n        const len = this.cache.length;\r\n        for (let i = 0; i < len; i++) {\r\n            const item = this.cache[i];\r\n            if (item.k === k) {\r\n                this.cache.splice(i, 1);\r\n                this.size -= 1;\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    clear() {\r\n        let len = this.cache.length;\r\n        this.size = 0;\r\n        if (!len) {\r\n            return;\r\n        }\r\n        while (len) {\r\n            this.cache.pop();\r\n            len--;\r\n        }\r\n    }\r\n}\r\nconst MapClass = 'Map' in global ? Map : SimpleMap;\n\nfunction getPrototype(obj) {\r\n    /* istanbul ignore next */\r\n    if (Object.getPrototypeOf) {\r\n        return Object.getPrototypeOf(obj);\r\n    }\r\n    else if (obj.__proto__) {\r\n        return obj.__proto__;\r\n    }\r\n    /* istanbul ignore next */\r\n    return obj.constructor.prototype;\r\n}\r\nfunction isAttrAnEvent(attr) {\r\n    return attr[0] === 'o' && attr[1] === 'n';\r\n}\r\nconst extend = (() => {\r\n    if ('assign' in Object) {\r\n        return (source, from) => {\r\n            if (!from) {\r\n                return source;\r\n            }\r\n            Object.assign(source, from);\r\n            return source;\r\n        };\r\n    }\r\n    else {\r\n        return (source, from) => {\r\n            if (!from) {\r\n                return source;\r\n            }\r\n            for (const key in from) {\r\n                if (from.hasOwnProperty(key)) {\r\n                    source[key] = from[key];\r\n                }\r\n            }\r\n            return source;\r\n        };\r\n    }\r\n})();\r\nfunction clone(obj) {\r\n    return extend({}, obj);\r\n}\n\nexport { getPrototype, isAttrAnEvent, extend, clone, nextTick, shallowEqual, SimpleMap, MapClass, isBrowser, doc, isMacSafari, isNumber, isSupportSVG, isString, isFunction, isBoolean, isArray, isObject, isNative, isUndefined, objectIs };\n//# sourceMappingURL=index.js.map\n","import Component from './component'\n\nconst Current: {\n  current: null | Component<any, any>,\n  index: number\n} = {\n  current: null,\n  index: 0\n}\n\nexport default Current\n","const EMPTY_CHILDREN = [];\r\nconst EMPTY_OBJ = {};\r\nfunction isNullOrUndef(o) {\r\n    return o === undefined || o === null;\r\n}\r\nfunction isInvalid(o) {\r\n    return isNullOrUndef(o) || o === true || o === false;\r\n}\r\nfunction isVNode(node) {\r\n    return !isNullOrUndef(node) && node.vtype === 2 /* Node */;\r\n}\r\nfunction isVText(node) {\r\n    return !isNullOrUndef(node) && node.vtype === 1 /* Text */;\r\n}\r\nfunction isComponent(instance) {\r\n    return !isInvalid(instance) && instance.isReactComponent === EMPTY_OBJ;\r\n}\r\nfunction isWidget(node) {\r\n    return (!isNullOrUndef(node) &&\r\n        (node.vtype & (4 /* Composite */)) > 0);\r\n}\r\nfunction isPortal(vtype, node) {\r\n    return (vtype & 32 /* Portal */) > 0;\r\n}\r\nfunction isComposite(node) {\r\n    return !isNullOrUndef(node) && node.vtype === 4 /* Composite */;\r\n}\r\nfunction isValidElement(node) {\r\n    return !isNullOrUndef(node) && node.vtype;\r\n}\r\nfunction isHook(arg) {\r\n    return !isNullOrUndef(arg) && typeof arg.vhook === 'number';\r\n}\r\n// tslint:disable-next-line:no-empty\r\nfunction noop() { }\r\n// typescript will compile the enum's value for us.\r\n// eg.\r\n// Composite = 1 << 2  => Composite = 4\r\nvar VType;\r\n(function (VType) {\r\n    VType[VType[\"Text\"] = 1] = \"Text\";\r\n    VType[VType[\"Node\"] = 2] = \"Node\";\r\n    VType[VType[\"Composite\"] = 4] = \"Composite\";\r\n    VType[VType[\"Void\"] = 16] = \"Void\";\r\n    VType[VType[\"Portal\"] = 32] = \"Portal\";\r\n})(VType || (VType = {}));\n\nexport { EMPTY_CHILDREN, EMPTY_OBJ, isNullOrUndef, isInvalid, isVNode, isVText, isComponent, isWidget, isPortal, isComposite, isValidElement, isHook, noop, VType };\n//# sourceMappingURL=index.js.map\n","import { isFunction, isString, isObject } from 'nerv-utils'\nimport { isComposite } from 'nerv-shared'\nimport { errorCatcher } from '../lifecycle'\nexport default {\n  update (lastVnode, nextVnode, domNode?) {\n    const prevRef = lastVnode != null && lastVnode.ref\n    const nextRef = nextVnode != null && nextVnode.ref\n\n    if (prevRef !== nextRef) {\n      this.detach(lastVnode, prevRef, lastVnode.dom)\n      this.attach(nextVnode, nextRef, domNode)\n    }\n  },\n  attach (vnode, ref, domNode: Element) {\n    const node = isComposite(vnode) ? vnode.component : domNode\n    if (isFunction(ref)) {\n      const componentForCatcher = isComposite(vnode) ? vnode.component : vnode\n      errorCatcher(() => {\n        ref(node)\n      }, componentForCatcher)\n    } else if (isString(ref)) {\n      const inst = vnode._owner\n      if (inst && isFunction(inst.render)) {\n        inst.refs[ref] = node\n      }\n    } else if (isObject(ref)) {\n      ref.current = node\n    }\n  },\n  detach (vnode, ref, domNode: Element) {\n    const node = isComposite(vnode) ? vnode.component : domNode\n    if (isFunction(ref)) {\n      const componentForCatcher = isComposite(vnode) ? vnode.component : vnode\n      errorCatcher(() => {\n        ref(null)\n      }, componentForCatcher)\n    } else if (isString(ref)) {\n      const inst = vnode._owner\n      if (inst.refs[ref] === node && isFunction(inst.render)) {\n        delete inst.refs[ref]\n      }\n    } else if (isObject(ref)) {\n      ref.current = null\n    }\n  }\n}\n","import { isFunction, MapClass, doc, isBrowser } from 'nerv-utils'\nimport { noop } from 'nerv-shared'\n\nconst ONINPUT = 'oninput'\nconst ONPROPERTYCHANGE = 'onpropertychange'\nconst isiOS =\n  isBrowser &&\n  !!navigator.platform &&\n  /iPad|iPhone|iPod/.test(navigator.platform)\n\nconst delegatedEvents = new MapClass()\n\nconst unbubbleEvents = {\n  [ONPROPERTYCHANGE]: 1,\n  onmousemove: 1,\n  ontouchmove: 1,\n  onmouseleave: 1,\n  onmouseenter: 1,\n  onload: 1,\n  onunload: 1,\n  onscroll: 1,\n  onfocus: 1,\n  onblur: 1,\n  onrowexit: 1,\n  onbeforeunload: 1,\n  onstop: 1,\n  ondragdrop: 1,\n  ondragenter: 1,\n  ondragexit: 1,\n  ondraggesture: 1,\n  ondragover: 1,\n  oncontextmenu: 1,\n  onerror: 1,\n  onabort: 1,\n  oncanplay: 1,\n  oncanplaythrough: 1,\n  ondurationchange: 1,\n  onemptied: 1,\n  onended: 1,\n  onloadeddata: 1,\n  onloadedmetadata: 1,\n  onloadstart: 1,\n  onencrypted: 1,\n  onpause: 1,\n  onplay: 1,\n  onplaying: 1,\n  onprogress: 1,\n  onratechange: 1,\n  onseeking: 1,\n  onseeked: 1,\n  onstalled: 1,\n  onsuspend: 1,\n  ontimeupdate: 1,\n  onvolumechange: 1,\n  onwaiting: 1\n}\n\nconst bindFocus = false\ndeclare global {\n  interface Event {\n    persist: Function\n  }\n}\n\n/* istanbul ignore next */\nif (isBrowser && navigator.userAgent.indexOf('MSIE 9') >= 0) {\n  const elements: HTMLInputElement[] = []\n  const values: string[] = []\n  doc.addEventListener('selectionchange', () => {\n    const el = doc.activeElement as HTMLInputElement\n    if (detectCanUseOnInputNode(el)) {\n      const index = elements.indexOf(el)\n      const element = elements[index] || elements.push(el)\n      if (element.value !== values[index]) {\n        const ev = doc.createEvent('CustomEvent')\n        ev.initCustomEvent('input', true, true, undefined)\n        values[index] = element.value\n        el.dispatchEvent(ev)\n      }\n    }\n  })\n}\n\nif (typeof Event !== 'undefined' && !Event.prototype.persist) {\n  // tslint:disable-next-line:no-empty\n  Event.prototype.persist = noop\n}\n\nexport function attachEvent (\n  domNode: Element,\n  eventName: string,\n  handler: Function\n) {\n  eventName = fixEvent(domNode, eventName)\n  /* istanbul ignore next */\n  if (eventName === ONPROPERTYCHANGE) {\n    processOnPropertyChangeEvent(domNode, handler)\n    return\n  }\n  let delegatedRoots = delegatedEvents.get(eventName)\n  if (unbubbleEvents[eventName] === 1) {\n    if (!delegatedRoots) {\n      delegatedRoots = new MapClass()\n    }\n    const event = attachEventToNode(domNode, eventName, delegatedRoots)\n    delegatedEvents.set(eventName, delegatedRoots)\n    if (isFunction(handler)) {\n      delegatedRoots.set(domNode, {\n        eventHandler: handler,\n        event\n      })\n    }\n  } else {\n    if (!delegatedRoots) {\n      delegatedRoots = {\n        items: new MapClass()\n      }\n      delegatedRoots.event = attachEventToDocument(\n        doc,\n        eventName,\n        delegatedRoots\n      )\n      delegatedEvents.set(eventName, delegatedRoots)\n    }\n    if (isFunction(handler)) {\n      if (isiOS) {\n        (domNode as any).onclick = noop\n      }\n      delegatedRoots.items.set(domNode, handler)\n    }\n  }\n}\n\nexport function detachEvent (\n  domNode: Element,\n  eventName: string,\n  handler: Function\n) {\n  eventName = fixEvent(domNode, eventName)\n  if (eventName === ONPROPERTYCHANGE) {\n    return\n  }\n  const delegatedRoots = delegatedEvents.get(eventName)\n  if (unbubbleEvents[eventName] === 1 && delegatedRoots) {\n    const event = delegatedRoots.get(domNode)\n    if (event) {\n      domNode.removeEventListener(parseEventName(eventName), event.event, false)\n      /* istanbul ignore next */\n      const delegatedRootsSize = delegatedRoots.size\n      if (delegatedRoots.delete(domNode) && delegatedRootsSize === 0) {\n        delegatedEvents.delete(eventName)\n      }\n    }\n  } else if (delegatedRoots && delegatedRoots.items) {\n    const items = delegatedRoots.items\n    if (items.delete(domNode) && items.size === 0) {\n      doc.removeEventListener(\n        parseEventName(eventName),\n        delegatedRoots.event,\n        false\n      )\n      delegatedEvents.delete(eventName)\n    }\n  }\n}\n\nlet propertyChangeActiveElement\nlet propertyChangeActiveElementValue\nlet propertyChangeActiveElementValueProp\nconst propertyChangeActiveHandlers = {}\n\n/* istanbul ignore next */\nfunction propertyChangeHandler (event) {\n  if (event.propertyName !== 'value') {\n    return\n  }\n  const target = event.target || event.srcElement\n  const val = target.value\n  if (val === propertyChangeActiveElementValue) {\n    return\n  }\n  propertyChangeActiveElementValue = val\n  const handler = propertyChangeActiveHandlers[target.name]\n  if (isFunction(handler)) {\n    handler.call(target, event)\n  }\n}\n\n/* istanbul ignore next */\nfunction processOnPropertyChangeEvent (node, handler) {\n  propertyChangeActiveHandlers[node.name] = handler\n  if (!bindFocus) {\n    // bindFocus = true\n    node.addEventListener(\n      'focusin',\n      () => {\n        unbindOnPropertyChange()\n        bindOnPropertyChange(node)\n      },\n      false\n    )\n    node.addEventListener('focusout', unbindOnPropertyChange, false)\n  }\n}\n\n/* istanbul ignore next */\nfunction bindOnPropertyChange (node) {\n  propertyChangeActiveElement = node\n  propertyChangeActiveElementValue = node.value\n  propertyChangeActiveElementValueProp = Object.getOwnPropertyDescriptor(\n    node.constructor.prototype,\n    'value'\n  )\n  Object.defineProperty(propertyChangeActiveElement, 'value', {\n    get () {\n      return propertyChangeActiveElementValueProp.get.call(this)\n    },\n    set (val) {\n      propertyChangeActiveElementValue = val\n      propertyChangeActiveElementValueProp.set.call(this, val)\n    }\n  })\n  propertyChangeActiveElement.addEventListener(\n    'propertychange',\n    propertyChangeHandler,\n    false\n  )\n}\n\n/* istanbul ignore next */\nfunction unbindOnPropertyChange () {\n  if (!propertyChangeActiveElement) {\n    return\n  }\n  delete propertyChangeActiveElement.value\n  propertyChangeActiveElement.removeEventListener(\n    'propertychange',\n    propertyChangeHandler,\n    false\n  )\n\n  propertyChangeActiveElement = null\n  propertyChangeActiveElementValue = null\n  propertyChangeActiveElementValueProp = null\n}\n\nfunction detectCanUseOnInputNode (node) {\n  const nodeName = node.nodeName && node.nodeName.toLowerCase()\n  const type = node.type\n  return (\n    (nodeName === 'input' && /text|password/.test(type)) ||\n    nodeName === 'textarea'\n  )\n}\n\nfunction fixEvent (node: Element, eventName: string) {\n  if (eventName === 'onDoubleClick') {\n    eventName = 'ondblclick'\n  } else if (eventName === 'onTouchTap') {\n    eventName = 'onclick'\n    // tslint:disable-next-line:prefer-conditional-expression\n  } else if (eventName === 'onChange' && detectCanUseOnInputNode(node)) {\n    eventName = ONINPUT in window ? ONINPUT : ONPROPERTYCHANGE\n  } else {\n    eventName = eventName.toLowerCase()\n  }\n  return eventName\n}\n\nfunction parseEventName (name) {\n  return name.substr(2)\n}\n/* istanbul ignore next */\nfunction stopPropagation () {\n  this.cancelBubble = true\n  this.stopImmediatePropagation()\n}\n\nfunction dispatchEvent (event, target, items, count, eventData) {\n  const eventsToTrigger = items.get(target)\n  if (eventsToTrigger) {\n    count--\n    eventData.currentTarget = target\n    // for React synthetic event compatibility\n    Object.defineProperties(event, {\n      nativeEvent: {\n        value: event\n      }\n    })\n    eventsToTrigger(event)\n    if (event.cancelBubble) {\n      return\n    }\n  }\n  if (count > 0) {\n    const parentDom = target.parentNode\n    if (\n      parentDom === null ||\n      (event.type === 'click' && parentDom.nodeType === 1 && parentDom.disabled)\n    ) {\n      return\n    }\n    dispatchEvent(event, parentDom, items, count, eventData)\n  }\n}\n\nfunction attachEventToDocument (d, eventName, delegatedRoots) {\n  const eventHandler = (event) => {\n    const items = delegatedRoots.items\n    const count = items.size\n    if (count > 0) {\n      const eventData = {\n        currentTarget: event.target\n      }\n      /* istanbul ignore next */\n      try {\n        Object.defineProperties(event, {\n          currentTarget: {\n            configurable: true,\n            get () {\n              return eventData.currentTarget\n            }\n          },\n          stopPropagation: {\n            value: stopPropagation\n          }\n        })\n      } catch (error) {\n        // some browsers crashed\n        // see: https://stackoverflow.com/questions/44052813/why-cannot-redefine-property\n      }\n      dispatchEvent(event, event.target, delegatedRoots.items, count, eventData)\n    }\n  }\n  d.addEventListener(parseEventName(eventName), eventHandler, false)\n  return eventHandler\n}\n\nfunction attachEventToNode (node, eventName, delegatedRoots) {\n  const eventHandler = (event) => {\n    const eventToTrigger = delegatedRoots.get(node)\n    if (eventToTrigger && eventToTrigger.eventHandler) {\n      const eventData = {\n        currentTarget: node\n      }\n      /* istanbul ignore next */\n      Object.defineProperties(event, {\n        currentTarget: {\n          configurable: true,\n          get () {\n            return eventData.currentTarget\n          }\n        }\n      })\n      eventToTrigger.eventHandler(event)\n    }\n  }\n  node.addEventListener(parseEventName(eventName), eventHandler, false)\n  return eventHandler\n}\n","import { isNullOrUndef, isInvalid, VType, VirtualChildren } from 'nerv-shared'\nimport { isAttrAnEvent, isArray } from 'nerv-utils'\nimport Ref from './ref'\nimport { detachEvent } from '../event'\n\nexport function unmountChildren (\n  children: VirtualChildren,\n  parentDom?: Element\n) {\n  if (isArray(children)) {\n    for (let i = 0, len = children.length; i < len; i++) {\n      unmount(children[i], parentDom)\n    }\n  } else {\n    unmount(children, parentDom)\n  }\n}\n\nexport function unmount (vnode, parentDom?) {\n  if (isInvalid(vnode)) {\n    return\n  }\n  const vtype = vnode.vtype\n  // Bitwise operators for better performance\n  // see: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators\n  const dom = vnode.dom\n\n  if ((vtype & (VType.Composite)) > 0) {\n    vnode.destroy()\n  } else if ((vtype & VType.Node) > 0) {\n    const { props, children, ref } = vnode\n    unmountChildren(children)\n    for (const propName in props) {\n      if (isAttrAnEvent(propName)) {\n        detachEvent(dom, propName, props[propName])\n      }\n    }\n    if (ref !== null) {\n      Ref.detach(vnode, ref, dom)\n    }\n  } else if (vtype & VType.Portal) {\n    unmountChildren(vnode.children, vnode.type)\n  }\n\n  if (!isNullOrUndef(parentDom) && !isNullOrUndef(dom)) {\n    parentDom.removeChild(dom)\n  }\n  // vnode.dom = null\n}\n","const NS = {\n  ev: 'http://www.w3.org/2001/xml-events',\n  xlink: 'http://www.w3.org/1999/xlink',\n  xml: 'http://www.w3.org/XML/1998/namespace'\n}\n\nconst ATTRS = {\n  accentHeight: 'accent-height',\n  accumulate: 0,\n  additive: 0,\n  alignmentBaseline: 'alignment-baseline',\n  allowReorder: 'allowReorder',\n  alphabetic: 0,\n  amplitude: 0,\n  arabicForm: 'arabic-form',\n  ascent: 0,\n  attributeName: 'attributeName',\n  attributeType: 'attributeType',\n  autoReverse: 'autoReverse',\n  azimuth: 0,\n  baseFrequency: 'baseFrequency',\n  baseProfile: 'baseProfile',\n  baselineShift: 'baseline-shift',\n  bbox: 0,\n  begin: 0,\n  bias: 0,\n  by: 0,\n  calcMode: 'calcMode',\n  capHeight: 'cap-height',\n  clip: 0,\n  clipPath: 'clip-path',\n  clipRule: 'clip-rule',\n  clipPathUnits: 'clipPathUnits',\n  colorInterpolation: 'color-interpolation',\n  colorInterpolationFilters: 'color-interpolation-filters',\n  colorProfile: 'color-profile',\n  colorRendering: 'color-rendering',\n  contentScriptType: 'contentScriptType',\n  contentStyleType: 'contentStyleType',\n  cursor: 0,\n  cx: 0,\n  cy: 0,\n  d: 0,\n  decelerate: 0,\n  descent: 0,\n  diffuseConstant: 'diffuseConstant',\n  direction: 0,\n  display: 0,\n  divisor: 0,\n  dominantBaseline: 'dominant-baseline',\n  dur: 0,\n  dx: 0,\n  dy: 0,\n  edgeMode: 'edgeMode',\n  elevation: 0,\n  enableBackground: 'enable-background',\n  end: 0,\n  evEvent: 'ev:event',\n  exponent: 0,\n  externalResourcesRequired: 'externalResourcesRequired',\n  fill: 0,\n  fillOpacity: 'fill-opacity',\n  fillRule: 'fill-rule',\n  filter: 0,\n  filterRes: 'filterRes',\n  filterUnits: 'filterUnits',\n  floodColor: 'flood-color',\n  floodOpacity: 'flood-opacity',\n  focusable: 0,\n  fontFamily: 'font-family',\n  fontSize: 'font-size',\n  fontSizeAdjust: 'font-size-adjust',\n  fontStretch: 'font-stretch',\n  fontStyle: 'font-style',\n  fontVariant: 'font-variant',\n  fontWeight: 'font-weight',\n  format: 0,\n  from: 0,\n  fx: 0,\n  fy: 0,\n  g1: 0,\n  g2: 0,\n  glyphName: 'glyph-name',\n  glyphOrientationHorizontal: 'glyph-orientation-horizontal',\n  glyphOrientationVertical: 'glyph-orientation-vertical',\n  glyphRef: 'glyphRef',\n  gradientTransform: 'gradientTransform',\n  gradientUnits: 'gradientUnits',\n  hanging: 0,\n  horizAdvX: 'horiz-adv-x',\n  horizOriginX: 'horiz-origin-x',\n  ideographic: 0,\n  imageRendering: 'image-rendering',\n  in: 0,\n  in2: 0,\n  intercept: 0,\n  k: 0,\n  k1: 0,\n  k2: 0,\n  k3: 0,\n  k4: 0,\n  kernelMatrix: 'kernelMatrix',\n  kernelUnitLength: 'kernelUnitLength',\n  kerning: 0,\n  keyPoints: 'keyPoints',\n  keySplines: 'keySplines',\n  keyTimes: 'keyTimes',\n  lengthAdjust: 'lengthAdjust',\n  letterSpacing: 'letter-spacing',\n  lightingColor: 'lighting-color',\n  limitingConeAngle: 'limitingConeAngle',\n  local: 0,\n  markerEnd: 'marker-end',\n  markerMid: 'marker-mid',\n  markerStart: 'marker-start',\n  markerHeight: 'markerHeight',\n  markerUnits: 'markerUnits',\n  markerWidth: 'markerWidth',\n  mask: 0,\n  maskContentUnits: 'maskContentUnits',\n  maskUnits: 'maskUnits',\n  mathematical: 0,\n  mode: 0,\n  numOctaves: 'numOctaves',\n  offset: 0,\n  opacity: 0,\n  operator: 0,\n  order: 0,\n  orient: 0,\n  orientation: 0,\n  origin: 0,\n  overflow: 0,\n  overlinePosition: 'overline-position',\n  overlineThickness: 'overline-thickness',\n  paintOrder: 'paint-order',\n  panose1: 'panose-1',\n  pathLength: 'pathLength',\n  patternContentUnits: 'patternContentUnits',\n  patternTransform: 'patternTransform',\n  patternUnits: 'patternUnits',\n  pointerEvents: 'pointer-events',\n  points: 0,\n  pointsAtX: 'pointsAtX',\n  pointsAtY: 'pointsAtY',\n  pointsAtZ: 'pointsAtZ',\n  preserveAlpha: 'preserveAlpha',\n  preserveAspectRatio: 'preserveAspectRatio',\n  primitiveUnits: 'primitiveUnits',\n  r: 0,\n  radius: 0,\n  refX: 'refX',\n  refY: 'refY',\n  renderingIntent: 'rendering-intent',\n  repeatCount: 'repeatCount',\n  repeatDur: 'repeatDur',\n  requiredExtensions: 'requiredExtensions',\n  requiredFeatures: 'requiredFeatures',\n  restart: 0,\n  result: 0,\n  rotate: 0,\n  rx: 0,\n  ry: 0,\n  scale: 0,\n  seed: 0,\n  shapeRendering: 'shape-rendering',\n  slope: 0,\n  spacing: 0,\n  specularConstant: 'specularConstant',\n  specularExponent: 'specularExponent',\n  speed: 0,\n  spreadMethod: 'spreadMethod',\n  startOffset: 'startOffset',\n  stdDeviation: 'stdDeviation',\n  stemh: 0,\n  stemv: 0,\n  stitchTiles: 'stitchTiles',\n  stopColor: 'stop-color',\n  stopOpacity: 'stop-opacity',\n  strikethroughPosition: 'strikethrough-position',\n  strikethroughThickness: 'strikethrough-thickness',\n  string: 0,\n  stroke: 0,\n  strokeDasharray: 'stroke-dasharray',\n  strokeDashoffset: 'stroke-dashoffset',\n  strokeLinecap: 'stroke-linecap',\n  strokeLinejoin: 'stroke-linejoin',\n  strokeMiterlimit: 'stroke-miterlimit',\n  strokeOpacity: 'stroke-opacity',\n  strokeWidth: 'stroke-width',\n  surfaceScale: 'surfaceScale',\n  systemLanguage: 'systemLanguage',\n  tableValues: 'tableValues',\n  targetX: 'targetX',\n  targetY: 'targetY',\n  textAnchor: 'text-anchor',\n  textDecoration: 'text-decoration',\n  textRendering: 'text-rendering',\n  textLength: 'textLength',\n  to: 0,\n  transform: 0,\n  u1: 0,\n  u2: 0,\n  underlinePosition: 'underline-position',\n  underlineThickness: 'underline-thickness',\n  unicode: 0,\n  unicodeBidi: 'unicode-bidi',\n  unicodeRange: 'unicode-range',\n  unitsPerEm: 'units-per-em',\n  vAlphabetic: 'v-alphabetic',\n  vHanging: 'v-hanging',\n  vIdeographic: 'v-ideographic',\n  vMathematical: 'v-mathematical',\n  values: 0,\n  vectorEffect: 'vector-effect',\n  version: 0,\n  vertAdvY: 'vert-adv-y',\n  vertOriginX: 'vert-origin-x',\n  vertOriginY: 'vert-origin-y',\n  viewBox: 'viewBox',\n  viewTarget: 'viewTarget',\n  visibility: 0,\n  widths: 0,\n  wordSpacing: 'word-spacing',\n  writingMode: 'writing-mode',\n  x: 0,\n  xHeight: 'x-height',\n  x1: 0,\n  x2: 0,\n  xChannelSelector: 'xChannelSelector',\n  xlinkActuate: 'xlink:actuate',\n  xlinkArcrole: 'xlink:arcrole',\n  xlinkHref: 'xlink:href',\n  xlinkRole: 'xlink:role',\n  xlinkShow: 'xlink:show',\n  xlinkTitle: 'xlink:title',\n  xlinkType: 'xlink:type',\n  xmlBase: 'xml:base',\n  xmlId: 'xml:id',\n  xmlns: 0,\n  xmlnsXlink: 'xmlns:xlink',\n  xmlLang: 'xml:lang',\n  xmlSpace: 'xml:space',\n  y: 0,\n  y1: 0,\n  y2: 0,\n  yChannelSelector: 'yChannelSelector',\n  z: 0,\n  zoomAndPan: 'zoomAndPan'\n}\n\nconst SVGPropertyConfig = {\n  Properties: {},\n  DOMAttributeNamespaces: {\n    'ev:event': NS.ev,\n    'xlink:actuate': NS.xlink,\n    'xlink:arcrole': NS.xlink,\n    'xlink:href': NS.xlink,\n    'xlink:role': NS.xlink,\n    'xlink:show': NS.xlink,\n    'xlink:title': NS.xlink,\n    'xlink:type': NS.xlink,\n    'xml:base': NS.xml,\n    'xml:id': NS.xml,\n    'xml:lang': NS.xml,\n    'xml:space': NS.xml\n  },\n  DOMAttributeNames: {}\n}\n\nObject.keys(ATTRS).forEach((key) => {\n  SVGPropertyConfig.Properties[key] = 0\n  if (ATTRS[key]) {\n    SVGPropertyConfig.DOMAttributeNames[key] = ATTRS[key]\n  }\n})\n\nexport default SVGPropertyConfig\n","/* tslint:disable: no-empty*/\nimport {\n  isString,\n  isAttrAnEvent,\n  isNumber,\n  isArray,\n  isFunction,\n  MapClass\n} from 'nerv-utils'\nimport createElement, { mountChild } from './create-element'\nimport {\n  Props,\n  VText,\n  isInvalid,\n  VNode,\n  isNullOrUndef,\n  isValidElement,\n  EMPTY_CHILDREN,\n  VType\n} from 'nerv-shared'\nimport { unmount, unmountChildren } from './unmount'\nimport Ref from './ref'\nimport { attachEvent, detachEvent } from '../event'\nimport SVGPropertyConfig from './svg-property-config'\n\nexport function patch (\n  lastVnode,\n  nextVnode,\n  parentNode: Element,\n  context: object,\n  isSvg?: boolean\n) {\n  const lastDom = lastVnode.dom\n  let newDom\n  if (isSameVNode(lastVnode, nextVnode)) {\n    const vtype = nextVnode.vtype\n    if (vtype & VType.Node) {\n      isSvg = isNullOrUndef(isSvg) ? lastVnode.isSvg : isSvg\n      if (isSvg) {\n        nextVnode.isSvg = isSvg\n      }\n      patchProps(lastDom, nextVnode.props, lastVnode.props, lastVnode, isSvg)\n      patchChildren(\n        lastDom,\n        lastVnode.children,\n        nextVnode.children,\n        context,\n        isSvg as boolean\n      )\n      if (nextVnode.ref !== null) {\n        Ref.update(lastVnode, nextVnode, lastDom)\n      }\n      newDom = lastDom\n    } else if ((vtype & (VType.Composite)) > 0) {\n      newDom = nextVnode.update(lastVnode, nextVnode, context)\n    } else if (vtype & VType.Text) {\n      return patchVText(lastVnode, nextVnode)\n    } else if (vtype & VType.Portal) {\n      patchChildren(lastVnode.type, lastVnode.children, nextVnode.children, context, isSvg as boolean)\n    }\n    // @TODO: test case\n    nextVnode.dom = newDom || lastDom\n  } else if (isArray(lastVnode) && isArray(nextVnode)) {\n    patchArrayChildren(lastDom, lastVnode, nextVnode, context, false)\n  } else {\n    unmount(lastVnode)\n    newDom = createElement(nextVnode, isSvg, context)\n    if (nextVnode !== null) {\n      nextVnode.dom = newDom\n    }\n    if (parentNode !== null) {\n      parentNode.replaceChild(newDom, lastDom)\n    }\n  }\n  return newDom\n}\n\nfunction patchArrayChildren (\n  parentDom: Element,\n  lastChildren,\n  nextChildren,\n  context: object,\n  isSvg: boolean\n) {\n  const lastLength = lastChildren.length\n  const nextLength = nextChildren.length\n  if (lastLength === 0) {\n    if (nextLength > 0) {\n      for (let i = 0; i < nextLength; i++) {\n        mountChild(nextChildren[i], parentDom, context, isSvg)\n      }\n    }\n  } else if (nextLength === 0) {\n    unmountChildren(lastChildren)\n    parentDom.textContent = ''\n  } else {\n    if (isKeyed(lastChildren, nextChildren)) {\n      patchKeyedChildren(\n        lastChildren,\n        nextChildren,\n        parentDom,\n        context,\n        isSvg,\n        lastLength,\n        nextLength\n      )\n    } else {\n      patchNonKeyedChildren(\n        parentDom,\n        lastChildren,\n        nextChildren,\n        context,\n        isSvg,\n        lastLength,\n        nextLength\n      )\n    }\n  }\n}\n\nexport function patchChildren (\n  parentDom: Element,\n  lastChildren,\n  nextChildren,\n  context: object,\n  isSvg: boolean\n) {\n  // @TODO: is a better way to compatible with react-router?\n  // if (lastChildren === nextChildren) {\n  //   return\n  // }\n  const lastChildrenIsArray = isArray(lastChildren)\n  const nextChildrenIsArray = isArray(nextChildren)\n  if (lastChildrenIsArray && nextChildrenIsArray) {\n    patchArrayChildren(parentDom, lastChildren, nextChildren, context, isSvg)\n  } else if (!lastChildrenIsArray && !nextChildrenIsArray) {\n    patch(lastChildren, nextChildren, parentDom, context, isSvg)\n  } else if (lastChildrenIsArray && !nextChildrenIsArray) {\n    patchArrayChildren(parentDom, lastChildren, [nextChildren], context, isSvg)\n  } else if (!lastChildrenIsArray && nextChildrenIsArray) {\n    patchArrayChildren(parentDom, [lastChildren], nextChildren, context, isSvg)\n  }\n}\n\nfunction patchNonKeyedChildren (\n  parentDom: Element,\n  lastChildren,\n  nextChildren,\n  context: object,\n  isSvg: boolean,\n  lastLength: number,\n  nextLength: number\n) {\n  const minLength = Math.min(lastLength, nextLength)\n  let i = 0\n  while (i < minLength) {\n    patch(lastChildren[i], nextChildren[i], parentDom, context, isSvg)\n    i++\n  }\n  if (lastLength < nextLength) {\n    for (i = minLength; i < nextLength; i++) {\n      if (parentDom !== null) {\n        parentDom.appendChild(createElement(\n          nextChildren[i],\n          isSvg,\n          context\n        ) as Node)\n      }\n    }\n  } else if (lastLength > nextLength) {\n    for (i = minLength; i < lastLength; i++) {\n      unmount(lastChildren[i], parentDom)\n    }\n  }\n}\n\n/**\n *\n * Virtual DOM patching algorithm based on ivi by\n * Boris Kaul (@localvoid)\n * Licensed under the MIT License\n * https://github.com/ivijs/ivi/blob/master/LICENSE\n *\n */\nfunction patchKeyedChildren (\n  a: VNode[],\n  b: VNode[],\n  dom: Element,\n  context,\n  isSvg: boolean,\n  aLength: number,\n  bLength: number\n) {\n  let aEnd = aLength - 1\n  let bEnd = bLength - 1\n  let aStart = 0\n  let bStart = 0\n  let i\n  let j\n  let aNode\n  let bNode\n  let nextNode\n  let nextPos\n  let node\n  let aStartNode = a[aStart]\n  let bStartNode = b[bStart]\n  let aEndNode = a[aEnd]\n  let bEndNode = b[bEnd]\n\n  // Step 1\n  // tslint:disable-next-line\n  outer: {\n    // Sync nodes with the same key at the beginning.\n    while (aStartNode.key === bStartNode.key) {\n      patch(aStartNode, bStartNode, dom, context, isSvg)\n      aStart++\n      bStart++\n      if (aStart > aEnd || bStart > bEnd) {\n        break outer\n      }\n      aStartNode = a[aStart]\n      bStartNode = b[bStart]\n    }\n\n    // Sync nodes with the same key at the end.\n    while (aEndNode.key === bEndNode.key) {\n      patch(aEndNode, bEndNode, dom, context, isSvg)\n      aEnd--\n      bEnd--\n      if (aStart > aEnd || bStart > bEnd) {\n        break outer\n      }\n      aEndNode = a[aEnd]\n      bEndNode = b[bEnd]\n    }\n  }\n\n  if (aStart > aEnd) {\n    if (bStart <= bEnd) {\n      nextPos = bEnd + 1\n      nextNode = nextPos < bLength ? b[nextPos].dom : null\n      while (bStart <= bEnd) {\n        node = b[bStart]\n        bStart++\n        attachNewNode(dom, createElement(node, isSvg, context), nextNode)\n      }\n    }\n  } else if (bStart > bEnd) {\n    while (aStart <= aEnd) {\n      unmount(a[aStart++], dom)\n    }\n  } else {\n    const aLeft = aEnd - aStart + 1\n    const bLeft = bEnd - bStart + 1\n    const sources = new Array(bLeft)\n\n    // Mark all nodes as inserted.\n    for (i = 0; i < bLeft; i++) {\n      sources[i] = -1\n    }\n    let moved = false\n    let pos = 0\n    let patched = 0\n\n    // When sizes are small, just loop them through\n    if (bLeft <= 4 || aLeft * bLeft <= 16) {\n      for (i = aStart; i <= aEnd; i++) {\n        aNode = a[i]\n        if (patched < bLeft) {\n          for (j = bStart; j <= bEnd; j++) {\n            bNode = b[j]\n            if (aNode.key === bNode.key) {\n              sources[j - bStart] = i\n\n              if (pos > j) {\n                moved = true\n              } else {\n                pos = j\n              }\n              patch(aNode, bNode, dom, context, isSvg)\n              patched++\n              a[i] = null as any\n              break\n            }\n          }\n        }\n      }\n    } else {\n      const keyIndex = new MapClass()\n\n      for (i = bStart; i <= bEnd; i++) {\n        keyIndex.set(b[i].key, i)\n      }\n\n      for (i = aStart; i <= aEnd; i++) {\n        aNode = a[i]\n\n        if (patched < bLeft) {\n          j = keyIndex.get(aNode.key)\n\n          if (j !== undefined) {\n            bNode = b[j]\n            sources[j - bStart] = i\n            if (pos > j) {\n              moved = true\n            } else {\n              pos = j\n            }\n            patch(aNode, bNode, dom, context, isSvg)\n            patched++\n            a[i] = null as any\n          }\n        }\n      }\n    }\n    if (aLeft === aLength && patched === 0) {\n      unmountChildren(a)\n      dom.textContent = ''\n      while (bStart < bLeft) {\n        node = b[bStart]\n        bStart++\n        attachNewNode(dom, createElement(node, isSvg, context), null)\n      }\n    } else {\n      i = aLeft - patched\n      while (i > 0) {\n        aNode = a[aStart++]\n        if (aNode !== null) {\n          unmount(aNode, dom)\n          i--\n        }\n      }\n      if (moved) {\n        const seq = lis(sources)\n        j = seq.length - 1\n        for (i = bLeft - 1; i >= 0; i--) {\n          if (sources[i] === -1) {\n            pos = i + bStart\n            node = b[pos]\n            nextPos = pos + 1\n            attachNewNode(\n              dom,\n              createElement(node, isSvg, context),\n              nextPos < bLength ? b[nextPos].dom : null\n            )\n          } else {\n            if (j < 0 || i !== seq[j]) {\n              pos = i + bStart\n              node = b[pos]\n              nextPos = pos + 1\n              attachNewNode(\n                dom,\n                node.dom,\n                nextPos < bLength ? b[nextPos].dom : null\n              )\n            } else {\n              j--\n            }\n          }\n        }\n      } else if (patched !== bLeft) {\n        for (i = bLeft - 1; i >= 0; i--) {\n          if (sources[i] === -1) {\n            pos = i + bStart\n            node = b[pos]\n            nextPos = pos + 1\n            attachNewNode(\n              dom,\n              createElement(node, isSvg, context),\n              nextPos < bLength ? b[nextPos].dom : null\n            )\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction attachNewNode (parentDom, newNode, nextNode) {\n  if (isNullOrUndef(nextNode)) {\n    parentDom.appendChild(newNode)\n  } else {\n    parentDom.insertBefore(newNode, nextNode)\n  }\n}\n\n/**\n * Slightly modified Longest Increased Subsequence algorithm, it ignores items that have -1 value, they're representing\n * new items.\n *\n * http://en.wikipedia.org/wiki/Longest_increasing_subsequence\n *\n * @param a Array of numbers.\n * @returns Longest increasing subsequence.\n */\nfunction lis (a: number[]): number[] {\n  const p = a.slice()\n  const result: number[] = []\n  result.push(0)\n  let u: number\n  let v: number\n\n  for (let i = 0, il = a.length; i < il; ++i) {\n    if (a[i] === -1) {\n      continue\n    }\n\n    const j = result[result.length - 1]\n    if (a[j] < a[i]) {\n      p[i] = j\n      result.push(i)\n      continue\n    }\n\n    u = 0\n    v = result.length - 1\n\n    while (u < v) {\n      const c = ((u + v) / 2) | 0\n      if (a[result[c]] < a[i]) {\n        u = c + 1\n      } else {\n        v = c\n      }\n    }\n\n    if (a[i] < a[result[u]]) {\n      if (u > 0) {\n        p[i] = result[u - 1]\n      }\n      result[u] = i\n    }\n  }\n\n  u = result.length\n  v = result[u - 1]\n\n  while (u-- > 0) {\n    result[u] = v\n    v = p[v]\n  }\n\n  return result\n}\n\nfunction isKeyed (lastChildren: VNode[], nextChildren: VNode[]): boolean {\n  return (\n    nextChildren.length > 0 &&\n    !isNullOrUndef(nextChildren[0]) &&\n    !isNullOrUndef(nextChildren[0].key) &&\n    lastChildren.length > 0 &&\n    !isNullOrUndef(lastChildren[0]) &&\n    !isNullOrUndef(lastChildren[0].key)\n  )\n}\n\nfunction isSameVNode (a, b) {\n  if (isInvalid(a) || isInvalid(b) || isArray(a) || isArray(b)) {\n    return false\n  }\n  return a.type === b.type && a.vtype === b.vtype && a.key === b.key\n}\n\nfunction patchVText (lastVNode: VText, nextVNode: VText) {\n  const dom = lastVNode.dom\n  if (dom === null) {\n    return\n  }\n  const nextText = nextVNode.text\n  nextVNode.dom = dom\n\n  if (lastVNode.text !== nextText) {\n    dom.nodeValue = nextText as string\n  }\n  return dom\n}\n\nconst skipProps = {\n  children: 1,\n  key: 1,\n  ref: 1,\n  owner: 1\n}\n\nconst IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i\n\nfunction setStyle (domStyle, style, value) {\n  if (isNullOrUndef(value) || (isNumber(value) && isNaN(value))) {\n    domStyle[style] = ''\n    return\n  }\n  if (style === 'float') {\n    domStyle['cssFloat'] = value\n    domStyle['styleFloat'] = value\n    return\n  }\n  domStyle[style] =\n    !isNumber(value) || IS_NON_DIMENSIONAL.test(style) ? value : value + 'px'\n}\n\nfunction patchEvent (\n  eventName: string,\n  lastEvent: Function,\n  nextEvent: Function,\n  domNode: Element\n) {\n  if (lastEvent !== nextEvent) {\n    if (isFunction(lastEvent)) {\n      detachEvent(domNode, eventName, lastEvent)\n    }\n    attachEvent(domNode, eventName, nextEvent)\n  }\n}\n\nfunction patchStyle (lastAttrValue: CSSStyleSheet, nextAttrValue: CSSStyleSheet, dom: HTMLElement) {\n  const domStyle = dom.style\n  let style\n  let value\n\n  if (isString(nextAttrValue)) {\n    domStyle.cssText = nextAttrValue\n    return\n  }\n  if (!isNullOrUndef(lastAttrValue) && !isString(lastAttrValue)) {\n    for (style in nextAttrValue) {\n      value = nextAttrValue[style]\n      if (value !== lastAttrValue[style]) {\n        setStyle(domStyle, style, value)\n      }\n    }\n    for (style in lastAttrValue) {\n      if (isNullOrUndef(nextAttrValue[style])) {\n        domStyle[style] = ''\n      }\n    }\n  } else {\n    for (style in nextAttrValue) {\n      value = nextAttrValue[style]\n      setStyle(domStyle, style, value)\n    }\n  }\n}\n\nexport function patchProp (\n  domNode: Element,\n  prop: string,\n  lastValue,\n  nextValue,\n  lastVnode: VNode | null,\n  isSvg?: boolean\n) {\n  // fix the value update for textarea/input\n  if (lastValue !== nextValue || prop === 'value') {\n    if (prop === 'className') {\n      prop = 'class'\n    }\n    if (skipProps[prop] === 1) {\n      return\n    } else if (prop === 'class' && !isSvg) {\n      domNode.className = nextValue\n    } else if (prop === 'dangerouslySetInnerHTML') {\n      const lastHtml = lastValue && lastValue.__html\n      const nextHtml = nextValue && nextValue.__html\n\n      if (lastHtml !== nextHtml) {\n        if (!isNullOrUndef(nextHtml)) {\n          if (\n            isValidElement(lastVnode) &&\n            lastVnode.children !== EMPTY_CHILDREN\n          ) {\n            unmountChildren(lastVnode.children)\n            lastVnode.children = []\n          }\n          domNode.innerHTML = nextHtml\n        }\n      }\n    } else if (isAttrAnEvent(prop)) {\n      patchEvent(prop, lastValue, nextValue, domNode)\n    } else if (prop === 'style') {\n      patchStyle(lastValue, nextValue, domNode as HTMLElement)\n    } else if (\n      prop !== 'list' &&\n      prop !== 'type' &&\n      !isSvg &&\n      prop in domNode\n    ) {\n      setProperty(domNode, prop, nextValue == null ? '' : nextValue)\n      if (nextValue == null || nextValue === false) {\n        domNode.removeAttribute(prop)\n      }\n    } else if (isNullOrUndef(nextValue) || nextValue === false) {\n      domNode.removeAttribute(prop)\n    } else {\n      const namespace = SVGPropertyConfig.DOMAttributeNamespaces[prop]\n      if (isSvg && namespace) {\n        if (nextValue) {\n          domNode.setAttributeNS(namespace, prop, nextValue)\n        } else {\n          const colonPosition = prop.indexOf(':')\n          const localName =\n            colonPosition > -1 ? prop.substr(colonPosition + 1) : prop\n          domNode.removeAttributeNS(namespace, localName)\n        }\n      } else {\n        if (!isFunction(nextValue)) {\n          domNode.setAttribute(prop, nextValue)\n        }\n        // WARNING: Non-event attributes with function values:\n        // https://reactjs.org/blog/2017/09/08/dom-attributes-in-react-16.html#changes-in-detail\n      }\n    }\n  }\n}\n\nexport function setProperty (node, name, value) {\n  try {\n    node[name] = value\n  } catch (e) {}\n}\n\nfunction patchProps (\n  domNode: Element,\n  nextProps: Props,\n  previousProps: Props,\n  lastVnode: VNode,\n  isSvg?: boolean\n) {\n  for (const propName in previousProps) {\n    const value = previousProps[propName]\n    if (isNullOrUndef(nextProps[propName]) && !isNullOrUndef(value)) {\n      if (isAttrAnEvent(propName)) {\n        detachEvent(domNode, propName, value)\n      } else if (propName === 'dangerouslySetInnerHTML') {\n        domNode.textContent = ''\n      } else if (propName === 'className') {\n        domNode.removeAttribute('class')\n      } else {\n        domNode.removeAttribute(propName)\n      }\n    }\n  }\n  for (const propName in nextProps) {\n    patchProp(\n      domNode,\n      propName,\n      previousProps[propName],\n      nextProps[propName],\n      lastVnode,\n      isSvg\n    )\n  }\n}\n\nexport default patch\n","import { isSupportSVG, isArray, isString, isNumber, doc, isBoolean } from 'nerv-utils'\nimport {\n  isNullOrUndef,\n  VirtualNode,\n  isInvalid,\n  VType,\n  VNode,\n  isValidElement,\n  EMPTY_OBJ,\n  CompositeComponent,\n  isPortal\n} from 'nerv-shared'\nimport { patchProp } from './patch'\nimport Ref from './ref'\nconst SVG_NAMESPACE = 'http://www.w3.org/2000/svg'\n\nfunction createElement (\n  vnode: VirtualNode | VirtualNode[],\n  isSvg?: boolean,\n  parentContext?,\n  parentComponent?\n): Element | Text | Comment | DocumentFragment | null {\n  let domNode\n  if (isValidElement(vnode)) {\n    const vtype = vnode.vtype\n    if (vtype & (VType.Composite)) {\n      domNode = (vnode as CompositeComponent).init(parentContext, parentComponent)\n    } else if (vtype & VType.Text) {\n      domNode = doc.createTextNode((vnode as any).text);\n      (vnode as any).dom = domNode\n    } else if (vtype & VType.Node) {\n      domNode = mountVNode(vnode as any, isSvg, parentContext, parentComponent)\n    } else if (vtype & VType.Void) {\n      domNode = (vnode as any).dom = doc.createTextNode('')\n    } else if (isPortal(vtype, vnode)) {\n      vnode.type.appendChild(\n        createElement(vnode.children, isSvg, parentContext, parentComponent) as Element\n      )\n      domNode = doc.createTextNode('')\n    }\n  } else if (isString(vnode) || isNumber(vnode)) {\n    domNode = doc.createTextNode(vnode as string)\n  } else if (isNullOrUndef(vnode) || isBoolean(vnode)) {\n    domNode = doc.createTextNode('')\n  } else if (isArray(vnode)) {\n    domNode = doc.createDocumentFragment()\n    vnode.forEach((child) => {\n      if (!isInvalid(child)) {\n        const childNode = createElement(child, isSvg, parentContext, parentComponent)\n        if (childNode) {\n          domNode.appendChild(childNode)\n        }\n      }\n    })\n  } else {\n    throw new Error('Unsupported VNode.')\n  }\n  return domNode\n}\n\nexport function mountVNode (vnode: VNode, isSvg?: boolean, parentContext?, parentComponent?) {\n  if (vnode.isSvg) {\n    isSvg = true\n  } else if (vnode.type === 'svg') {\n    isSvg = true\n  /* istanbul ignore next */\n  } else if (!isSupportSVG) {\n    isSvg = false\n  }\n  if (isSvg) {\n    vnode.namespace = SVG_NAMESPACE\n    vnode.isSvg = isSvg\n  }\n  const domNode = !isSvg\n    ? doc.createElement(vnode.type)\n    : doc.createElementNS(vnode.namespace, vnode.type)\n  setProps(domNode, vnode, isSvg as boolean)\n  if (vnode.type === 'foreignObject') {\n    isSvg = false\n  }\n  const children = vnode.children\n  if (isArray(children)) {\n    for (let i = 0, len = children.length; i < len; i++) {\n      mountChild(children[i] as VNode, domNode, parentContext, isSvg, parentComponent)\n    }\n  } else {\n    mountChild(children as VNode, domNode, parentContext, isSvg, parentComponent)\n  }\n  vnode.dom = domNode\n  if (vnode.ref !== null) {\n    Ref.attach(vnode, vnode.ref, domNode)\n  }\n  return domNode\n}\n\nexport function mountChild (\n  child: VNode,\n  domNode: Element,\n  parentContext: Object,\n  isSvg?: boolean,\n  parentComponent?\n) {\n  child.parentContext = parentContext || EMPTY_OBJ\n  const childNode = createElement(child as VNode, isSvg, parentContext, parentComponent)\n  if (childNode !== null) {\n    domNode.appendChild(childNode)\n  }\n}\n\nfunction setProps (domNode: Element, vnode: VNode, isSvg: boolean) {\n  const props = vnode.props\n  for (const p in props) {\n    patchProp(domNode, p, null, props[p], null, isSvg)\n  }\n}\n\nexport default createElement\n","import { VType, VText } from 'nerv-shared'\n\nexport default function createVText (text: string | number): VText {\n  return {\n    text,\n    vtype: VType.Text,\n    dom: null\n  }\n}\n","import { VType } from 'nerv-shared'\nexport function createVoid () {\n  return {\n    dom: null,\n    vtype: VType.Void\n  }\n}\n","import { isFunction, isUndefined, nextTick, isArray, objectIs } from 'nerv-utils'\nimport Current from './current-owner'\nimport { isNullOrUndef } from 'nerv-shared'\nimport Component from './component'\nimport { RefObject } from './create-ref'\nimport { Context } from './create-context'\nimport { enqueueRender } from './render-queue'\n\nfunction getHooks (index: number): Hook {\n  if (Current.current === null) {\n    throw new Error(`invalid hooks call: hooks can only be called in a stateless component.`)\n  }\n  const hooks = Current.current.hooks\n  if (index >= hooks.length) {\n    hooks.push({} as any)\n  }\n  return hooks[index]\n}\n\ntype SetStateAction<S> = S | ((prevState: S) => S)\n\ntype Dispatch<A> = (value: A) => void\n\ntype EffectCallback = () => (void | (() => void))\n\ntype DependencyList = ReadonlyArray<any>\n\ntype Reducer<S, A> = (prevState: S, action: A) => S\n\ntype ReducerState<R extends Reducer<any, any>> = R extends Reducer<infer S, any> ? S : never\n\ntype ReducerAction<R extends Reducer<any, any>> = R extends Reducer<any, infer A> ? A : never\n\nexport interface HookEffect {\n  deps?: DependencyList\n  effect: EffectCallback\n  cleanup?: Function\n}\n\nexport interface HookState<S> {\n  component: Component<any, any>\n  state: [S, Dispatch<SetStateAction<S>>]\n}\n\nexport interface HookRef<T> {\n  ref?: RefObject<T>\n}\n\nexport interface HookReducer<R extends Reducer<any, any>, I> {\n  component: Component<any, any>\n  state: [ReducerState<R>, Dispatch<ReducerAction<R>>]\n}\n\nexport interface HookCallback<T> {\n  deps?: DependencyList\n  callback: Function\n  value: T\n}\n\nexport interface HookContext {\n  context?: true\n}\n\n// tslint:disable-next-line:max-line-length\nexport type Hook = HookEffect & HookState<unknown> & HookReducer<any, unknown> & HookRef<unknown> & HookCallback<any> & HookContext\n\nexport function useState<S> (initialState: S | (() => S)): [S, Dispatch<SetStateAction<S>>] {\n  if (isFunction(initialState)) {\n    initialState = initialState()\n  }\n  const hook = getHooks(Current.index++) as HookState<S>\n  if (!hook.state) {\n    hook.component = Current.current!\n    hook.state = [\n      initialState,\n      (action) => {\n        hook.state[0] = isFunction(action) ? action(hook.state[0]) : action\n        hook.component._disable = false\n        hook.component.setState({})\n      }\n    ]\n  }\n  return hook.state\n}\n\nexport function useReducer<R extends Reducer<any, any>, I> (\n  reducer: R,\n  initialState: I & ReducerState<R>,\n  initializer?: (arg: I & ReducerState<R>) => ReducerState<R>\n): [ReducerState<R>, Dispatch<ReducerAction<R>>] {\n  if (isFunction(initialState)) {\n    initialState = initialState()\n  }\n  const hook = getHooks(Current.index++) as HookReducer<R, I>\n  if (!hook.state) {\n    hook.component = Current.current!\n    hook.state = [\n      isUndefined(initializer) ? initialState : initializer(initialState),\n      (action) => {\n        hook.state[0] = reducer(hook.state[0], action)\n        hook.component._disable = false\n        hook.component.setState({})\n      }\n    ]\n  }\n  return hook.state\n}\n\nfunction areDepsChanged (prevDeps?: DependencyList, deps?: DependencyList) {\n  if (isNullOrUndef(prevDeps) || isNullOrUndef(deps)) {\n    return true\n  }\n  return deps.some((d, i) => !objectIs(d, prevDeps[i]))\n}\n\nexport function invokeEffects (component: Component<any, any>, delay: boolean = false) {\n  const effects = delay ? component.effects : component.layoutEffects\n  effects.forEach((hook) => {\n    if (isFunction(hook.cleanup)) {\n      hook.cleanup()\n    }\n    const result = hook.effect()\n    if (isFunction(result)) {\n      hook.cleanup = result\n    }\n  })\n\n  if (delay) {\n    component.effects = []\n  } else {\n    component.layoutEffects = []\n  }\n}\n\nlet scheduleEffectComponents: Array<Component<any, any>> = []\n\nfunction invokeScheduleEffects (component: Component) {\n  if (!component._afterScheduleEffect) {\n    component._afterScheduleEffect = true\n    scheduleEffectComponents.push(component)\n    if (scheduleEffectComponents.length === 1) {\n      nextTick(() => {\n        setTimeout(() => {\n          scheduleEffectComponents.forEach((c) => {\n            c._afterScheduleEffect = false\n            invokeEffects(c, true)\n          })\n          scheduleEffectComponents = []\n        }, 0)\n      })\n    }\n  }\n}\n\nfunction useEffectImpl (effect: EffectCallback, deps?: DependencyList, delay: boolean = false) {\n  const hook = getHooks(Current.index++)\n  if (areDepsChanged(hook.deps, deps)) {\n    hook.effect = effect\n    hook.deps = deps\n\n    if (delay) {\n      Current.current!.effects = Current.current!.effects.concat(hook)\n      invokeScheduleEffects(Current.current!)\n    } else {\n      Current.current!.layoutEffects = Current.current!.layoutEffects.concat(hook)\n    }\n  }\n}\n\nexport function useEffect (effect: EffectCallback, deps?: DependencyList): void {\n  useEffectImpl(effect, deps, true)\n}\n\nexport function useLayoutEffect (effect: EffectCallback, deps?: DependencyList): void {\n  useEffectImpl(effect, deps)\n}\n\nexport function useRef<T> (initialValue?: T): RefObject<T> {\n  const hook = getHooks(Current.index++) as HookRef<T>\n  if (!hook.ref) {\n    hook.ref = {\n      current: initialValue\n    }\n  }\n  return hook.ref\n}\n\nexport function useMemo<T> (factory: () => T, deps?: DependencyList): T {\n  const hook = getHooks(Current.index++)\n  if (areDepsChanged(hook.deps, deps)) {\n    hook.deps = deps\n    hook.callback = factory\n    hook.value = factory()\n  }\n  return hook.value\n}\n\nexport function useCallback<T extends (...args: never[]) => unknown> (callback: T, deps: DependencyList): T {\n  return useMemo(() => callback, deps)\n}\n\nexport function useContext<T> (context: Context<T>): T {\n  const provider = Current.current!.context[context._id]\n  if (isUndefined(provider)) {\n    return context._defaultValue\n  }\n  const hook = getHooks(Current.index++)\n  // should update when value changes with shouldComponentUpdate:false Component on top\n  if (isUndefined(hook.context)) {\n    hook.context = true\n    const c = Current.current!\n    provider.on(() => enqueueRender(c))\n  }\n  return provider.value\n}\n\nexport function useImperativeHandle<T, R extends T> (\n  ref: RefObject<T> | undefined,\n  init: () => R,\n  deps?: DependencyList\n): void {\n  useLayoutEffect(() => {\n    if (isFunction(ref)) {\n      ref(init())\n      return () => ref(null)\n    } else if (!isUndefined(ref)) {\n      ref.current = init()\n      return () => {\n        delete ref.current\n      }\n    }\n  }, isArray(deps) ? deps.concat([ref]) : undefined)\n}\n","// import { extend, isFunction, isNumber, isString } from 'nerv-utils'\nimport { extend, isFunction, isNumber, isString, clone, isUndefined } from 'nerv-utils'\nimport CurrentOwner from './current-owner'\nimport createElement from './vdom/create-element'\nimport createVText from './vdom/create-vtext'\nimport { createVoid } from './vdom/create-void'\nimport patch from './vdom/patch'\nimport {\n  isNullOrUndef,\n  CompositeComponent,\n  isComponent,\n  isInvalid,\n  VText,\n  VVoid,\n  VNode,\n  VType,\n  EMPTY_OBJ\n} from 'nerv-shared'\nimport FullComponent from './full-component'\nimport { unmount } from './vdom/unmount'\nimport Ref from './vdom/ref'\nimport Component from './component'\nimport { invokeEffects } from './hooks'\nimport { Emiter } from './emiter'\n\nconst readyComponents: any[] = []\n\nexport function errorCatcher (fn: Function, component: Component<any, any>) {\n  try {\n    return fn()\n  } catch (error) {\n    errorHandler(component, error)\n  }\n}\n\nfunction errorHandler (component: Component<any, any>, error) {\n  // if(!component) { throw error ; return }\n  let boundary\n  while (true) {\n    const { getDerivedStateFromError } = (component as any).constructor\n    if (isFunction(getDerivedStateFromError) || isFunction(component.componentDidCatch)) {\n      boundary = component\n      break\n    } else if (component._parentComponent) {\n      component = component._parentComponent\n    } else {\n      break\n    }\n  }\n  if (boundary) {\n    const { getDerivedStateFromError } = (boundary as any).constructor\n    const _disable = boundary._disable\n    boundary._disable = false\n    if (isFunction(getDerivedStateFromError)) {\n      component.setState(getDerivedStateFromError(error))\n    } else if (isFunction(component.componentDidCatch)) {\n      boundary.componentDidCatch(error)\n    }\n    boundary._disable = _disable\n  } else {\n    throw error\n  }\n}\n\nfunction ensureVirtualNode (rendered: any): VText | VVoid | VNode {\n  if (isNumber(rendered) || isString(rendered)) {\n    return createVText(rendered)\n  } else if (isInvalid(rendered)) {\n    return createVoid()\n  }\n  return rendered\n}\n\nexport function mountVNode (vnode, parentContext: any, parentComponent?) {\n  return createElement(vnode, false, parentContext, parentComponent)\n}\n\nexport function mountComponent (\n  vnode: FullComponent,\n  parentContext: object,\n  parentComponent\n) {\n  const ref = vnode.ref\n  if (vnode.type.prototype && vnode.type.prototype.render) {\n    const contextType = vnode.type.contextType\n    const hasContextType = !isUndefined(contextType)\n    const provider = hasContextType ? (parentContext[contextType._id] as Emiter<any>) : null\n    const context = hasContextType\n      ? (\n        !isNullOrUndef(provider) ? provider.value : contextType._defaultValue\n      )\n      : parentContext\n    vnode.component = new vnode.type(vnode.props, context)\n  } else {\n    const c = new Component(vnode.props, parentContext)\n    c.render = () => vnode.type.call(c, c.props, c.context)\n    vnode.component = c\n  }\n  const component = vnode.component\n  component.vnode = vnode\n  if (isComponent(parentComponent)) {\n    component._parentComponent = parentComponent as any\n  }\n  const newState = callGetDerivedStateFromProps(vnode.props, component.state, component)\n  if (!isUndefined(newState)) {\n    component.state = newState\n  }\n  if (!hasNewLifecycle(component) && isFunction(component.componentWillMount)) {\n    errorCatcher(() => {\n      (component as any).componentWillMount()\n    }, component)\n    component.state = component.getState()\n    component.clearCallBacks()\n  }\n  component._dirty = false\n  const rendered = renderComponent(component)\n  rendered.parentVNode = vnode\n  component._rendered = rendered\n  if (!isNullOrUndef(ref)) {\n    Ref.attach(vnode, ref, vnode.dom as Element)\n  }\n  const dom = (vnode.dom = mountVNode(\n    rendered,\n    getChildContext(component, parentContext),\n    component\n  ) as Element)\n  invokeEffects(component)\n  if (isFunction(component.componentDidMount)) {\n    readyComponents.push(component)\n  }\n  component._disable = false\n  return dom\n}\n\nexport function getChildContext (component, context = EMPTY_OBJ) {\n  if (isFunction(component.getChildContext)) {\n    return extend(clone(context), component.getChildContext())\n  }\n  return clone(context)\n}\n\nexport function renderComponent (component: Component<any, any>) {\n  CurrentOwner.current = component\n  CurrentOwner.index = 0\n  invokeEffects(component, true)\n  let rendered\n  errorCatcher(() => {\n    rendered = component.render()\n  }, component)\n  rendered = ensureVirtualNode(rendered)\n  CurrentOwner.current = null\n  return rendered\n}\n\nexport function flushMount () {\n  if (!readyComponents.length) {\n    return\n  }\n  // @TODO: perf\n  const queue = readyComponents.slice(0)\n  readyComponents.length = 0\n  queue.forEach((item) => {\n    if (isFunction(item)) {\n      item()\n    } else if (item.componentDidMount) {\n      errorCatcher(() => {\n        item.componentDidMount()\n      }, item)\n    }\n  })\n}\n\nexport function reRenderComponent (\n  prev: CompositeComponent,\n  current: CompositeComponent\n) {\n  const component = (current.component = prev.component) as any\n  const nextProps = current.props\n  const nextContext = current.context\n  component._disable = true\n  if (!hasNewLifecycle(component) && isFunction(component.componentWillReceiveProps)) {\n    errorCatcher(() => {\n      component.componentWillReceiveProps(nextProps, nextContext)\n    }, component)\n  }\n  component._disable = false\n  component.prevProps = component.props\n  component.prevState = component.state\n  component.prevContext = component.context\n  component.props = nextProps\n  component.context = nextContext\n  if (!isNullOrUndef(current.ref)) {\n    Ref.update(prev, current)\n  }\n  return updateComponent(component)\n}\n\nfunction callShouldComponentUpdate (props, state, context, component) {\n  let shouldUpdate = true\n  errorCatcher(() => {\n    shouldUpdate = component.shouldComponentUpdate(props, state, context)\n  }, component)\n  return shouldUpdate\n}\n\nexport function updateComponent (component, isForce = false) {\n  let vnode = component.vnode\n  let dom = vnode.dom\n  const props = component.props\n  let state = component.getState()\n  const context = component.context\n  const prevProps = component.prevProps || props\n  const prevState = component.prevState || component.state\n  const prevContext = component.prevContext || context\n\n  const stateFromProps = callGetDerivedStateFromProps(props, state, component)\n\n  if (!isUndefined(stateFromProps)) {\n    state = stateFromProps\n  }\n\n  component.props = prevProps\n  component.context = prevContext\n  let skip = false\n  if (\n    !isForce &&\n    isFunction(component.shouldComponentUpdate) &&\n    callShouldComponentUpdate(props, state, context, component) === false\n  ) {\n    skip = true\n  } else if (!hasNewLifecycle(component) && isFunction(component.componentWillUpdate)) {\n    errorCatcher(() => {\n      component.componentWillUpdate(props, state, context)\n    }, component)\n  }\n\n  if (!isUndefined(stateFromProps)) {\n    component.state = stateFromProps\n  }\n\n  component.props = props\n  component.state = state\n  component.context = context\n  component._dirty = false\n  if (!skip) {\n    const lastRendered = component._rendered\n    const rendered = renderComponent(component)\n    rendered.parentVNode = vnode\n    const childContext = getChildContext(component, context)\n    const snapshot = callGetSnapshotBeforeUpdate(prevProps, prevState, component)\n    const parentDom = lastRendered.dom && lastRendered.dom.parentNode\n    dom = vnode.dom = patch(lastRendered, rendered, parentDom || null, childContext)\n    component._rendered = rendered\n    if (isFunction(component.componentDidUpdate)) {\n      errorCatcher(() => {\n        component.componentDidUpdate(prevProps, prevState, snapshot)\n      }, component)\n    }\n    while (vnode = vnode.parentVNode) {\n      if ((vnode.vtype & (VType.Composite)) > 0) {\n        vnode.dom = dom\n      }\n    }\n  }\n  component.prevProps = component.props\n  component.prevState = component.state\n  component.prevContext = component.context\n  component.clearCallBacks()\n  flushMount()\n  invokeEffects(component)\n  return dom\n}\n\nexport function unmountComponent (vnode: FullComponent) {\n  const component = vnode.component\n  component.hooks.forEach((hook) => {\n    if (isFunction(hook.cleanup)) {\n      hook.cleanup()\n    }\n  })\n  if (isFunction(component.componentWillUnmount)) {\n    errorCatcher(() => {\n      (component as any).componentWillUnmount()\n    }, component)\n  }\n  component._disable = true\n  unmount(component._rendered)\n  if (!isNullOrUndef(vnode.ref)) {\n    Ref.detach(vnode, vnode.ref, vnode.dom as any)\n  }\n}\n\nfunction callGetDerivedStateFromProps (props, state, inst) {\n  const { getDerivedStateFromProps } = inst.constructor\n  let newState\n    // @TODO show warning\n  errorCatcher(() => {\n    if (isFunction(getDerivedStateFromProps)) {\n      const partialState = getDerivedStateFromProps.call(\n        null,\n        props,\n        state\n      )\n      if (!isUndefined(partialState)) {\n        newState = extend(clone(state), partialState)\n      }\n    }\n  }, inst)\n  return newState\n}\n\nfunction callGetSnapshotBeforeUpdate (props, state, inst) {\n  const { getSnapshotBeforeUpdate } = inst\n  let snapshot\n  errorCatcher(() => {\n    if (isFunction(getSnapshotBeforeUpdate)) {\n      snapshot = getSnapshotBeforeUpdate.call(inst, props, state)\n    }\n  }, inst)\n  return snapshot\n}\n\nfunction hasNewLifecycle (component) {\n  if (isFunction(component.constructor.getDerivedStateFromProps)) {\n    return true\n  }\n  return false\n}\n","import { nextTick } from 'nerv-utils'\nimport { updateComponent } from './lifecycle'\n\nlet items: any[] = []\n\nexport function enqueueRender (component) {\n  // tslint:disable-next-line:no-conditional-assignment\n  if (!component._dirty && (component._dirty = true) && items.push(component) === 1) {\n    nextTick(rerender)\n  }\n}\n\nexport function rerender (isForce = false) {\n  let p\n  const list = items\n  items = []\n  // tslint:disable-next-line:no-conditional-assignment\n  while ((p = list.pop())) {\n    if (p._dirty) {\n      updateComponent(p, isForce)\n    }\n  }\n}\n","import { isFunction, extend, clone, isArray } from 'nerv-utils'\nimport { enqueueRender } from './render-queue'\nimport { updateComponent } from './lifecycle'\nimport {\n  Props,\n  ComponentLifecycle,\n  Refs,\n  EMPTY_OBJ,\n  Component as ComponentInst,\n  CompositeComponent,\n  EMPTY_CHILDREN\n} from 'nerv-shared'\nimport { Hook, HookEffect } from './hooks'\n\ninterface Component<P = {}, S = {}> extends ComponentLifecycle<P, S> {\n  _rendered: any\n  dom: any\n}\n\nclass Component<P, S> implements ComponentInst<P, S> {\n  public static defaultProps: {}\n  static getDerivedStateFromError? (error?): object | null\n  state: Readonly<S>\n  props: Readonly<P> & Readonly<Props>\n  prevProps: P\n  prevState: S\n  prevContext: object\n  _parentComponent: Component<any, any>\n  vnode: CompositeComponent\n  context: any\n  _dirty = true\n  _disable = true\n  _pendingStates: any[] = []\n  _pendingCallbacks: Function[]\n  refs: Refs\n  isReactComponent: Object\n  _afterScheduleEffect = false\n  hooks: Hook[] = []\n  effects: HookEffect[] = EMPTY_CHILDREN\n  layoutEffects: HookEffect[] = EMPTY_CHILDREN\n\n  constructor (props?: P, context?: any) {\n    if (!this.state) {\n      this.state = {} as S\n    }\n    this.props = props || ({} as P)\n    this.context = context || EMPTY_OBJ\n    this.refs = {}\n  }\n\n  setState<K extends keyof S> (\n    state:\n      | ((prevState: Readonly<S>, props: P) => Pick<S, K> | S)\n      | (Pick<S, K> | S),\n    callback?: () => void\n  ): void {\n    if (state) {\n      (this._pendingStates = this._pendingStates || []).push(state)\n    }\n    if (isFunction(callback)) {\n      (this._pendingCallbacks = this._pendingCallbacks || []).push(callback)\n    }\n    if (!this._disable) {\n      enqueueRender(this)\n    }\n  }\n\n  getState () {\n    // tslint:disable-next-line:no-this-assignment\n    const { _pendingStates, state, props } = this\n    if (!_pendingStates.length) {\n      return state\n    }\n    const stateClone = clone(state)\n    const queue = _pendingStates.concat()\n    this._pendingStates.length = 0\n    queue.forEach((nextState) => {\n      if (isFunction(nextState)) {\n        nextState = nextState.call(this, state, props)\n      }\n      extend(stateClone, nextState)\n    })\n\n    return stateClone as S\n  }\n\n  clearCallBacks () {\n    if (isArray(this._pendingCallbacks)) {\n      while (this._pendingCallbacks.length) {\n        (this._pendingCallbacks.pop() as any).call(this)\n      }\n    }\n  }\n  forceUpdate (callback?: Function) {\n    if (isFunction(callback)) {\n      (this._pendingCallbacks = this._pendingCallbacks || []).push(callback)\n    }\n    updateComponent(this, true)\n  }\n\n  // tslint:disable-next-line\n  public render(nextProps?: P, nextState?, nextContext?): any {}\n}\n\nComponent.prototype.isReactComponent = EMPTY_OBJ\n\nexport default Component\n","import Component from './component'\nimport { shallowEqual } from 'nerv-utils'\n\nclass PureComponent<P, S> extends Component<P, S> {\n  isPureComponent = true\n\n  shouldComponentUpdate (nextProps: P, nextState: S) {\n    return !shallowEqual(this.props, nextProps) || !shallowEqual(this.state, nextState)\n  }\n}\n\nexport default PureComponent\n","import { noop, CompositeComponent, StatelessComponent, VirtualNode, Component } from 'nerv-shared'\n\nexport type optionsHook = (vnode: CompositeComponent | StatelessComponent) => void\n\nconst options: {\n  afterMount: optionsHook\n  afterUpdate: optionsHook\n  beforeUpdate: optionsHook\n  beforeUnmount: optionsHook\n  beforeMount: optionsHook\n  afterCreate: optionsHook\n  beforeRender: (component: Component<any, any>) => void\n  roots: VirtualNode[],\n  debug: boolean\n} = {\n    afterMount: noop,\n    afterUpdate: noop,\n    beforeUpdate: noop,\n    beforeUnmount: noop,\n    beforeRender: noop,\n    beforeMount: noop,\n    afterCreate: noop,\n    roots: [],\n    debug: false\n  }\n\nexport default options\n","import { mountVNode, flushMount } from './lifecycle'\nimport { VirtualNode, isComposite } from 'nerv-shared'\nimport { patch } from './vdom/patch'\nimport options from './options'\n\nexport function render (\n  vnode: VirtualNode,\n  container: Element,\n  callback?: Function\n) {\n  if (!container) {\n    throw new Error(`${container} should be a DOM Element`)\n  }\n  const lastVnode = (container as any)._component\n  let dom\n  options.roots.push(vnode)\n  if (lastVnode !== undefined) {\n    options.roots = options.roots.filter((item) => item !== lastVnode)\n    dom = patch(lastVnode, vnode, container, {})\n  } else {\n    dom = mountVNode(vnode, {})\n    container.appendChild(dom)\n  }\n\n  if (container) {\n    (container as any)._component = vnode\n  }\n  flushMount()\n  if (callback) {\n    callback()\n  }\n\n  return isComposite(vnode) ? vnode.component : dom\n}\n","import {\n  Props,\n  VType,\n  VNode,\n  VirtualChildren,\n  Component,\n  EMPTY_OBJ\n} from 'nerv-shared'\n\nfunction createVNode (\n  type: string,\n  props: Props,\n  children: VirtualChildren,\n  key,\n  namespace: string,\n  owner: Component<any, any>,\n  ref: Function | string | null | undefined\n): VNode {\n  return {\n    type,\n    key: key || null,\n    vtype: VType.Node,\n    props: props || EMPTY_OBJ,\n    children,\n    namespace: namespace || null,\n    _owner: owner,\n    dom: null,\n    ref: ref || null\n  }\n}\n\nexport default createVNode\n","import createVNode from './create-vnode'\nimport createVText from './create-vtext'\nimport { createVoid } from './create-void'\nimport {\n  Props,\n  VirtualChildren,\n  VirtualNode,\n  isValidElement,\n  EMPTY_CHILDREN,\n  VNode\n} from 'nerv-shared'\nimport { isString, isArray, isNumber } from 'nerv-utils'\n\nfunction h (type: string, props: Props, children?: VirtualChildren) {\n  let childNodes\n  if (props.children) {\n    if (!children) {\n      children = props.children\n    }\n  }\n  if (isArray(children)) {\n    childNodes = []\n    addChildren(childNodes, children as any, type)\n  } else if (isString(children) || isNumber(children)) {\n    children = createVText(String(children))\n  } else if (!isValidElement(children)) {\n    children = EMPTY_CHILDREN\n  }\n  props.children = childNodes !== undefined ? childNodes : children\n  return createVNode(\n    type,\n    props,\n    props.children as any[],\n    props.key,\n    props.namespace,\n    props.owner,\n    props.ref\n  ) as VNode\n}\n\nfunction addChildren (\n  childNodes: VirtualNode[],\n  children: VirtualNode | VirtualNode[],\n  type: string\n) {\n  if (isString(children) || isNumber(children)) {\n    childNodes.push(createVText(String(children)))\n  } else if (isValidElement(children)) {\n    childNodes.push(children)\n  } else if (isArray(children)) {\n    for (let i = 0; i < children.length; i++) {\n      addChildren(childNodes, children[i], type)\n    }\n  } else {\n    childNodes.push(createVoid())\n  }\n}\n\nexport default h\n","import { VType, CompositeComponent, Ref } from 'nerv-shared'\nimport {\n  mountComponent,\n  reRenderComponent,\n  unmountComponent\n} from './lifecycle'\nimport Component from './component'\nimport { isUndefined, isArray } from 'nerv-utils'\nimport options from './options'\n\nclass ComponentWrapper implements CompositeComponent {\n  vtype = VType.Composite\n  type: any\n  name: string\n  _owner: any\n  props: any\n  component: Component<any, any>\n  context: any\n  key: any\n  dom: Element | null\n  _rendered: any\n  ref: Ref\n\n  constructor (type, props) {\n    this.type = type\n    this.name = type.name\n    if (isUndefined(this.name)) {\n      const names = type.toString().match(/^function\\s*([^\\s(]+)/)\n      this.name = isArray(names) ? names[0] : 'Component'\n    }\n    type.displayName = this.name\n    this._owner = props.owner\n    delete props.owner\n    if ((this.ref = props.ref)) {\n      delete props.ref\n    }\n    if (type._forwarded) {\n      if (!isUndefined(this.ref)) {\n        props.ref = this.ref\n      }\n      delete this.ref\n    }\n    this.props = props\n    this.key = props.key || null\n    this.dom = null\n    options.afterCreate(this)\n  }\n\n  init (parentContext, parentComponent) {\n    options.beforeMount(this)\n    const dom = mountComponent(this, parentContext, parentComponent)\n    options.afterMount(this)\n    return dom\n  }\n\n  update (previous, current, parentContext, domNode?) {\n    this.context = parentContext\n    options.beforeUpdate(this)\n    const dom = reRenderComponent(previous, this)\n    options.afterUpdate(this)\n    return dom\n  }\n\n  destroy () {\n    options.beforeUnmount(this)\n    unmountComponent(this)\n  }\n}\n\nexport default ComponentWrapper\n","import h from './vdom/h'\nimport { isFunction, isString, isUndefined } from 'nerv-utils'\nimport FullComponent from './full-component'\n// import StatelessComponent from './stateless-component'\nimport CurrentOwner from './current-owner'\nimport {\n  Props,\n  VNode,\n  VirtualChildren,\n  EMPTY_CHILDREN\n} from 'nerv-shared'\nimport SVGPropertyConfig from './vdom/svg-property-config'\nimport Component from './component'\n\nfunction transformPropsForRealTag (type: string, props: Props) {\n  const newProps: Props = {}\n  for (const propName in props) {\n    const propValue = props[propName]\n    if (propName === 'defaultValue') {\n      newProps.value = props.value || props.defaultValue\n      continue\n    }\n    const svgPropName = SVGPropertyConfig.DOMAttributeNames[propName]\n    if (svgPropName && svgPropName !== propName) {\n      newProps[svgPropName] = propValue\n      continue\n    }\n    newProps[propName] = propValue\n  }\n  return newProps\n}\n\n/**\n *\n * @param props\n * @param defaultProps\n * defaultProps should respect null but ignore undefined\n * @see: https://facebook.github.io/react/docs/react-component.html#defaultprops\n */\nfunction transformPropsForComponent (props: Props, defaultProps?: Props) {\n  const newProps: any = {}\n  for (const propName in props) {\n    const propValue = props[propName]\n    newProps[propName] = propValue\n  }\n  if (defaultProps) {\n    for (const propName in defaultProps) {\n      if (isUndefined(newProps[propName])) {\n        newProps[propName] = defaultProps[propName]\n      }\n    }\n  }\n  return newProps\n}\n\nfunction createElement<T> (\n  type: string | Function | Component<any, any>,\n  properties?: T & Props | null,\n  ..._children: Array<VirtualChildren | null>\n) {\n  let children: any = _children\n  if (_children) {\n    if (_children.length === 1) {\n      children = _children[0]\n    } else if (_children.length === 0) {\n      children = undefined\n    }\n  }\n  let props\n  if (isString(type)) {\n    props = transformPropsForRealTag(type, properties as Props)\n    props.owner = CurrentOwner.current\n    return h(type, props, children as any) as VNode\n  } else if (isFunction(type)) {\n    props = transformPropsForComponent(\n      properties as any,\n      (type as any).defaultProps\n    )\n    if (!props.children || props.children === EMPTY_CHILDREN) {\n      props.children = children || children === 0 ? children : EMPTY_CHILDREN\n    }\n    props.owner = CurrentOwner.current\n    return new FullComponent(type, props)\n  }\n  return type\n}\n\nexport default createElement\n","import createElement from './create-element'\nimport createVText from './vdom/create-vtext'\nimport { extend, clone, isArray, isString, isNumber } from 'nerv-utils'\nimport { isVText, isVNode, EMPTY_CHILDREN, VType, isNullOrUndef, isPortal, isInvalid } from 'nerv-shared'\nimport { createVoid } from './vdom/create-void'\n\nexport default function cloneElement (vnode, props?: object, ...children): any {\n  if (isVText(vnode)) {\n    return createVText(vnode.text)\n  }\n  if (isString(vnode) || isNumber(vnode)) {\n    return createVText(vnode)\n  }\n  if (isInvalid(vnode)\n    || (!isInvalid(vnode) && isPortal(vnode.vtype, vnode))\n    || (vnode && (vnode.vtype & VType.Void))) {\n    return createVoid()\n  }\n  const properties = clone(extend(clone(vnode.props), props))\n  if (vnode.namespace) {\n    properties.namespace = vnode.namespace\n  }\n  if ((vnode.vtype & VType.Composite) && !isNullOrUndef(vnode.ref)) {\n    properties.ref = vnode.ref\n  }\n  let childrenTmp =\n    (arguments.length > 2 ?\n      [].slice.call(arguments, 2) :\n      vnode.children || properties.children) || []\n  if (childrenTmp.length) {\n    if (childrenTmp.length === 1) {\n      childrenTmp = children[0]\n    }\n  }\n  if (isArray(vnode)) {\n    return vnode.map((item) => {\n      return cloneElement(item)\n    })\n  }\n  const newVNode = createElement(vnode.type, properties)\n  if (isArray(childrenTmp)) {\n    let _children = childrenTmp.map((child) => {\n      return cloneElement(child, child.props)\n    })\n    if (_children.length === 0) {\n      _children = EMPTY_CHILDREN\n    }\n    if (isVNode(newVNode)) {\n      newVNode.children = _children\n    }\n    newVNode.props.children = _children\n  } else if (childrenTmp) {\n    if (isVNode(newVNode)) {\n      newVNode.children = cloneElement(childrenTmp)\n    }\n    newVNode.props.children = cloneElement(childrenTmp, childrenTmp.props)\n  }\n  return newVNode\n}\n","import { isArray } from 'nerv-utils'\nimport {\n  isNullOrUndef,\n  VirtualChildren,\n  EMPTY_CHILDREN,\n  isInvalid\n} from 'nerv-shared'\n\nexport type IterateFn = (\n  value: VirtualChildren | any,\n  index: number,\n  array: Array<VirtualChildren | any>\n) => any\n\nexport const Children = {\n  map (children: Array<VirtualChildren | any>, fn: IterateFn, ctx: any): any[] {\n    if (isNullOrUndef(children)) {\n      return children\n    }\n    children = Children.toArray(children)\n    if (ctx && ctx !== children) {\n      fn = fn.bind(ctx)\n    }\n    return children.map(fn)\n  },\n  forEach (\n    children: Array<VirtualChildren | any>,\n    fn: IterateFn,\n    ctx: any\n  ): void {\n    if (isNullOrUndef(children)) {\n      return\n    }\n    children = Children.toArray(children)\n    if (ctx && ctx !== children) {\n      fn = fn.bind(ctx)\n    }\n    for (let i = 0, len = children.length; i < len; i++) {\n      const child = isInvalid(children[i]) ? null : children[i]\n\n      fn(child, i, children)\n    }\n  },\n  count (children: Array<VirtualChildren | any>): number {\n    children = Children.toArray(children)\n    return children.length\n  },\n  only (children: Array<VirtualChildren | any>): VirtualChildren | any {\n    children = Children.toArray(children)\n    if (children.length !== 1) {\n      throw new Error('Children.only() expects only one child.')\n    }\n    return children[0]\n  },\n  toArray (\n    children: Array<VirtualChildren | any>\n  ): Array<VirtualChildren | any> {\n    if (isNullOrUndef(children)) {\n      return []\n    }\n    if (isArray(children)) {\n      const result = []\n\n      flatten(children, result)\n\n      return result\n    }\n    return EMPTY_CHILDREN.concat(children)\n  }\n}\n\nfunction flatten (arr, result) {\n  for (let i = 0, len = arr.length; i < len; i++) {\n    const value = arr[i]\n    if (isArray(value)) {\n      flatten(value, result)\n    } else {\n      result.push(value)\n    }\n  }\n  return result\n}\n","// tslint:disable:no-conditional-assignment\nimport { render } from './render'\n\nexport function hydrate (vnode, container: Element, callback?: Function) {\n  if (container !== null) {\n    // lastChild causes less reflow than firstChild\n    let dom = container.lastChild as Element\n    // there should be only a single entry for the root\n    while (dom) {\n      const next = dom.previousSibling\n      container.removeChild(dom)\n      dom = next as Element\n    }\n    return render(vnode, container, callback)\n  }\n}\n","import { VirtualNode, VType, Portal } from 'nerv-shared'\n\nexport function createPortal (children: VirtualNode, container: Element): Portal {\n  return {\n    type: container,\n    vtype: VType.Portal,\n    children,\n    dom: null\n  }\n}\n","// some library check React version\n// see: https://github.com/NervJS/nerv/issues/46\nexport const version = '15.4.2'\n","import { isValidElement as isValidNervElement, VType, isComponent, isInvalid } from 'nerv-shared'\nimport { nextTick } from 'nerv-utils'\nimport { getChildContext } from './lifecycle'\nimport { render } from './render'\nimport { unmount } from './vdom/unmount'\nimport createElement from './create-element'\nimport Component from './component'\n\nexport function unmountComponentAtNode (dom) {\n  const component = dom._component\n  if (isValidNervElement(component)) {\n    unmount(component, dom)\n    delete dom._component\n    return true\n  }\n  return false\n}\n\nexport function findDOMNode (component) {\n  if (isInvalid(component)) {\n    return null\n  }\n  return isComponent(component)\n    ? component.vnode.dom\n    : isValidNervElement(component)\n      ? component.dom : component\n}\n\nexport function createFactory (type) {\n  return createElement.bind(null, type)\n}\n\nclass WrapperComponent<P, S> extends Component<P, S> {\n  getChildContext () {\n    // tslint:disable-next-line\n    return this.props.context\n  }\n\n  render () {\n    return this.props.children\n  }\n}\n\nexport function unstable_renderSubtreeIntoContainer (\n  parentComponent,\n  vnode,\n  container,\n  callback\n) {\n  // @TODO: should handle props.context?\n  const wrapper = createElement(\n    WrapperComponent,\n    { context: getChildContext(parentComponent, parentComponent.context) },\n    vnode\n  )\n  const rendered = render(wrapper as any, container)\n  if (callback) {\n    callback.call(rendered)\n  }\n  return rendered\n}\n\nexport function isValidElement (element) {\n  return (\n    isValidNervElement(element) && (element.vtype & (VType.Composite | VType.Node)) > 0\n  )\n}\n\nexport const unstable_batchedUpdates = nextTick\n","import { noop } from 'nerv-shared'\nconst shim = noop as any\nshim.isRequired = noop\n\nfunction getShim () {\n  return shim\n}\n\nconst PropTypes = {\n  array: shim,\n  bool: shim,\n  func: shim,\n  number: shim,\n  object: shim,\n  string: shim,\n\n  any: shim,\n  arrayOf: getShim,\n  element: shim,\n  instanceOf: getShim,\n  node: shim,\n  objectOf: getShim,\n  oneOf: getShim,\n  oneOfType: getShim,\n  shape: getShim,\n  exact: getShim,\n  PropTypes: {},\n  checkPropTypes: noop\n}\n\nPropTypes.PropTypes = PropTypes\n\nexport { PropTypes }\n","export interface RefObject<T> {\n  current?: T\n}\n\nexport function createRef<T> (): RefObject<T> {\n  return {}\n}\n\nexport function forwardRef (cb: Function): Function {\n  const fn = (props) => {\n    const ref = props.ref\n    delete props.ref\n    return cb(props, ref)\n  }\n  fn._forwarded = true\n  return fn\n}\n","import { shallowEqual, isFunction } from 'nerv-utils'\nimport Ref from './vdom/ref'\nimport createElement from './create-element'\nimport Component from './component'\n\nexport function memo (component: Function, propsAreEqual?: Function) {\n  function shouldComponentUpdate (this: Component, nextProps): boolean {\n    const prevRef = this.props.ref\n    const nextRef = nextProps.ref\n    if (prevRef !== nextRef) {\n      Ref.detach(this.vnode, prevRef, this.dom)\n      Ref.attach(this.vnode, nextRef, this.dom)\n      return true\n    }\n    return isFunction(propsAreEqual) ? !propsAreEqual(this.props, nextProps) : !shallowEqual(this.props, nextProps)\n  }\n\n  function Memoed (this: Component, props) {\n    this.shouldComponentUpdate = shouldComponentUpdate\n    return createElement(component, { ...props })\n  }\n\n  Memoed._forwarded = true\n\n  Memoed.isMemo = true\n\n  return Memoed\n}\n","class Emiter<T> {\n  public value: T\n  private handlers: Function[] = []\n\n  constructor (value: T) {\n    this.value = value\n  }\n\n  on (handler: Function) {\n    this.handlers.push(handler)\n  }\n\n  off (handler: Function) {\n    this.handlers = this.handlers.filter((h) => h !== handler)\n  }\n\n  set (value: T) {\n    this.value = value\n    this.handlers.forEach((h) => h(this.value))\n  }\n}\n\nexport {\n  Emiter\n}\n","import { Emiter } from './emiter'\nimport Component from './component'\nimport { isUndefined, objectIs } from 'nerv-utils'\n\nexport let uid = 0\n\nfunction onlyChild (children) {\n  return Array.isArray(children) ? children[0] : children\n}\n\nexport interface ProviderProps<T> {\n  value: T\n}\n\nexport interface ConsumerProps {\n  children: Function\n}\n\nexport interface ConsumerState<T> {\n  value: T\n}\n\nexport interface Context<T> {\n  Provider: Component<ProviderProps<T>>\n  Consumer: Component<ConsumerProps, ConsumerState<T>>\n  _id: string,\n  _defaultValue: T\n}\n\nexport function createContext<T> (defaultValue: T): Context<T> {\n  const contextProp = '__context_' + uid++ + '__'\n\n  class Provider extends Component<ProviderProps<T>> {\n    static isContextProvider = true\n\n    emiter = new Emiter(this.props.value)\n\n    getChildContext () {\n      return {\n        [contextProp]: this.emiter\n      }\n    }\n\n    componentWillReceiveProps (nextProps: ProviderProps<T>) {\n      if (!objectIs(this.props.value, nextProps.value)) {\n        this.emiter.set(nextProps.value)\n      }\n    }\n\n    render () {\n      return this.props.children\n    }\n  }\n\n  // tslint:disable-next-line: max-classes-per-file\n  class Consumer extends Component<ConsumerProps, ConsumerState<T>> {\n    static isContextConsumer = true\n    state = {\n      value: this.getContextValue()\n    }\n\n    context: {\n      [contextProp: string]: Emiter<T> | undefined\n    }\n\n    componentWillMount () {\n      const emiter = this.context[contextProp]\n      if (emiter) {\n        emiter.off(this.onUpdate)\n      }\n    }\n\n    componentDidMount () {\n      const emiter = this.context[contextProp]\n      if (emiter) {\n        emiter.on(this.onUpdate)\n      }\n    }\n\n    onUpdate = (value: T) => {\n      if (!objectIs(value, this.state.value)) {\n        this.setState({\n          value: this.getContextValue()\n        })\n      }\n    }\n\n    getContextValue (): T {\n      const emiter = this.context[contextProp]\n      return isUndefined(emiter) ? defaultValue : emiter.value\n    }\n\n    render () {\n      return onlyChild(this.props.children)(this.state.value)\n    }\n  }\n\n  return {\n    Provider,\n    Consumer,\n    _id: contextProp,\n    _defaultValue: defaultValue\n  } as any\n}\n","import Component from './component'\nimport PureComponent from './pure-component'\nimport { render } from './render'\nimport createElement from './create-element'\nimport cloneElement from './clone-element'\nimport { nextTick } from 'nerv-utils'\nimport { Children } from './children'\nimport { hydrate } from './hydrate'\nimport options from './options'\nimport { createPortal } from './vdom/create-portal'\nimport { version } from './version'\nimport {\n  unmountComponentAtNode,\n  findDOMNode,\n  unstable_renderSubtreeIntoContainer,\n  createFactory,\n  unstable_batchedUpdates,\n  isValidElement\n} from './dom'\nimport { PropTypes } from './prop-types' // for React 15- compat\n// tslint:disable-next-line: max-line-length\nimport { useEffect, useLayoutEffect, useReducer, useState, useRef, useCallback, useMemo, useImperativeHandle, useContext } from './hooks'\nimport { createRef, forwardRef } from './create-ref'\nimport { memo } from './memo'\nimport { createContext } from './create-context'\nimport { renderComponent } from './lifecycle'\n\nexport {\n  Children,\n  Component,\n  PureComponent,\n  createElement,\n  cloneElement,\n  render,\n  nextTick,\n  options,\n  findDOMNode,\n  isValidElement,\n  unmountComponentAtNode,\n  createPortal,\n  unstable_renderSubtreeIntoContainer,\n  hydrate,\n  createFactory,\n  unstable_batchedUpdates,\n  version,\n  PropTypes,\n  createRef,\n  forwardRef,\n  memo,\n  createContext,\n  renderComponent,\n  useEffect, useLayoutEffect, useReducer, useState, useRef, useCallback, useMemo, useImperativeHandle, useContext\n}\n\nexport default {\n  Children,\n  Component,\n  PureComponent,\n  createElement,\n  cloneElement,\n  render,\n  nextTick,\n  options,\n  findDOMNode,\n  isValidElement,\n  unmountComponentAtNode,\n  createPortal,\n  unstable_renderSubtreeIntoContainer,\n  hydrate,\n  createFactory,\n  unstable_batchedUpdates,\n  version,\n  PropTypes,\n  createRef,\n  forwardRef,\n  memo,\n  createContext,\n  renderComponent,\n  useEffect, useLayoutEffect, useReducer, useState, useRef, useCallback, useMemo, useImperativeHandle, useContext\n}\n"],"names":["global","local","let","self","Function","e","Error","const","isBrowser","window","noop","fakeDoc","doc","document","isMacSafari","navigator","platform","test","userAgent","isNumber","arg","isSupportSVG","isFunction","createAttributeNS","isString","isBoolean","isArray","Array","isObject","Object","isUndefined","o","undefined","objectIs","x","y","canUsePromise","resolved","Promise","resolve","nextTick","fn","bind","args","then","timerFunc","requestAnimationFrame","setTimeout","is","shallowEqual","obj1","obj2","obj1Keys","keys","obj2Keys","length","i","obj1KeyItem","hasOwnProperty","SimpleMap","cache","size","set","k","v","len","push","item","this","get","has","splice","clear","pop","MapClass","Map","isAttrAnEvent","attr","extend","source","from","assign","key","clone","obj","Current","EMPTY_CHILDREN","EMPTY_OBJ","isNullOrUndef","isInvalid","isVNode","node","vtype","isVText","isComponent","instance","isReactComponent","isPortal","isComposite","isValidElement","VType","lastVnode","nextVnode","domNode","prevRef","ref","nextRef","detach","dom","attach","vnode","component","componentForCatcher","inst","_owner","render","refs","current","ONINPUT","ONPROPERTYCHANGE","isiOS","delegatedEvents","unbubbleEvents","bindFocus","indexOf","elements","values","addEventListener","el","activeElement","detectCanUseOnInputNode","index","element","value","ev","createEvent","initCustomEvent","dispatchEvent","Event","prototype","persist","attachEvent","eventName","handler","fixEvent","delegatedRoots","event","attachEventToNode","attachEventToDocument","onclick","items","detachEvent","removeEventListener","parseEventName","delegatedRootsSize","propertyChangeActiveElement","propertyChangeActiveElementValue","propertyChangeActiveElementValueProp","propertyChangeActiveHandlers","propertyChangeHandler","propertyName","target","srcElement","val","name","call","processOnPropertyChangeEvent","unbindOnPropertyChange","bindOnPropertyChange","getOwnPropertyDescriptor","constructor","defineProperty","nodeName","toLowerCase","type","substr","stopPropagation","cancelBubble","stopImmediatePropagation","count","eventData","eventsToTrigger","currentTarget","defineProperties","parentDom","parentNode","nodeType","disabled","d","eventHandler","error","eventToTrigger","unmountChildren","children","unmount","destroy","props","propName","removeChild","NS","ATTRS","SVGPropertyConfig","xlink","xml","forEach","Properties","DOMAttributeNames","patch","context","isSvg","lastDom","newDom","isSameVNode","update","patchVText","createElement","replaceChild","patchArrayChildren","lastChildren","nextChildren","lastLength","nextLength","textContent","isKeyed","patchChildren","lastChildrenIsArray","nextChildrenIsArray","patchNonKeyedChildren","minLength","Math","min","appendChild","patchKeyedChildren","a","b","aLength","bLength","aEnd","bEnd","aStart","bStart","j","aNode","bNode","nextNode","nextPos","aStartNode","bStartNode","aEndNode","bEndNode","outer","aLeft","bLeft","sources","moved","pos","patched","keyIndex","seq","lis","attachNewNode","newNode","insertBefore","p","slice","result","u","il","c","lastVNode","nextVNode","nextText","text","nodeValue","skipProps","IS_NON_DIMENSIONAL","setStyle","domStyle","style","isNaN","patchEvent","lastEvent","nextEvent","patchStyle","lastAttrValue","nextAttrValue","cssText","patchProp","prop","lastValue","nextValue","className","lastHtml","__html","nextHtml","innerHTML","removeAttribute","namespace","DOMAttributeNamespaces","setAttributeNS","colonPosition","localName","removeAttributeNS","setAttribute","setProperty","patchProps","nextProps","previousProps","SVG_NAMESPACE","parentContext","parentComponent","init","createTextNode","mountVNode","createDocumentFragment","child","childNode","createElementNS","mountChild","setProps","createVText","createVoid","getHooks","hooks","useState","initialState","hook","state","action","_disable","setState","useReducer","reducer","initializer","areDepsChanged","prevDeps","deps","some","invokeEffects","delay","effects","layoutEffects","cleanup","effect","scheduleEffectComponents","invokeScheduleEffects","_afterScheduleEffect","useEffectImpl","concat","useEffect","useLayoutEffect","useRef","initialValue","useMemo","factory","callback","useCallback","useContext","provider","_id","_defaultValue","on","enqueueRender","useImperativeHandle","readyComponents","errorCatcher","errorHandler","boundary","getDerivedStateFromError","componentDidCatch","_parentComponent","ensureVirtualNode","rendered","mountComponent","contextType","hasContextType","Component","newState","callGetDerivedStateFromProps","hasNewLifecycle","componentWillMount","getState","clearCallBacks","_dirty","renderComponent","parentVNode","_rendered","getChildContext","componentDidMount","flushMount","queue","reRenderComponent","prev","nextContext","componentWillReceiveProps","prevProps","prevState","prevContext","updateComponent","callShouldComponentUpdate","shouldUpdate","shouldComponentUpdate","isForce","stateFromProps","skip","componentWillUpdate","lastRendered","childContext","snapshot","callGetSnapshotBeforeUpdate","componentDidUpdate","unmountComponent","componentWillUnmount","getDerivedStateFromProps","partialState","getSnapshotBeforeUpdate","rerender","list","_pendingStates","_pendingCallbacks","stateClone","nextState","forceUpdate","PureComponent","options","container","_component","roots","filter","createVNode","owner","h","childNodes","String","addChildren","ComponentWrapper","names","toString","match","displayName","_forwarded","afterCreate","beforeMount","afterMount","previous","beforeUpdate","afterUpdate","beforeUnmount","transformPropsForRealTag","newProps","propValue","defaultValue","svgPropName","transformPropsForComponent","defaultProps","properties","_children","CurrentOwner","FullComponent","cloneElement","childrenTmp","arguments","map","newVNode","Children","ctx","toArray","flatten","arr","hydrate","lastChild","next","previousSibling","createPortal","version","unmountComponentAtNode","isValidNervElement","findDOMNode","createFactory","WrapperComponent","unstable_renderSubtreeIntoContainer","wrapper","unstable_batchedUpdates","shim","isRequired","getShim","PropTypes","createRef","forwardRef","cb","memo","propsAreEqual","Memoed","isMemo","Emiter","handlers","off","uid","onlyChild","createContext","contextProp","Provider","emiter","Consumer","getContextValue","onUpdate"],"mappings":"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"}